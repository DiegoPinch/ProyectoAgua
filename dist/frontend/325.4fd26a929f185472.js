"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[325],{8325:(b,d,r)=>{r.r(d),r.d(d,{AdministracionModule:()=>y});var A=r(6814),m=r(1896),t=r(5879),n=r(6223),u=r(9413),l=r(7700),C=r(9862);let p=(()=>{class o{constructor(i){this.http=i,this.myAppUrl=u.N.endpoint,this.myApyUrl="api/detalledirectivas/",this.phpUrl="http://localhost:8085/servicio/buscar.php"}getAdministracion(){return this.http.get(this.myAppUrl+this.myApyUrl)}getAdministracionPhp(){return this.http.get(this.phpUrl)}postAdministracion(i){return this.http.post(`${this.myAppUrl}${this.myApyUrl}`,i)}deleteAdminstracion(i){return this.http.delete(this.myAppUrl+this.myApyUrl+i)}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var D=r(2032),g=r(9157),h=r(2296);let f=(()=>{class o{constructor(i,e,a){this.formBuilder=i,this.dialogRef=e,this._servicio=a,this.form=this.formBuilder.group({ID_DIR_DET:["",[n.kI.required]],CED_USU_DIR:["",n.kI.required],CARGO:["",n.kI.required],CONTRASENA:["",[n.kI.required]],OBSERVACIONES:["",[n.kI.required]]})}addEditDirectiva(){if(this.form.valid){const i=this.form.value;this._servicio.postAdministracion({ID_DIR_DET:i.ID_DIR_DET,CED_USU_DIR:i.CED_USU_DIR,A\u00d1O_ING:"2023-11-09",CARGO:i.CARGO,CONTRASENA:i.CONTRASENA,ESTADO:"Activo",OBSERVACIONES:i.OBSERVACIONES}).subscribe(a=>{this.cancelar(),this.dialogRef.close(!0)},a=>{console.error("Error al agregar la directiva:",a)})}else console.log("Formulario inv\xe1lido, por favor revisa los campos.")}cancelar(){this.dialogRef.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(l.so),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["gst-ingresar-editar-directiva"]],decls:35,vars:1,consts:[[1,"formulario",3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"columnas"],[1,"columna"],["appearance","fill"],["formControlName","ID_DIR_DET","matInput","","placeholder","Ingrese el ID","autocomplete","off"],["formControlName","CED_USU_DIR","matInput","","placeholder","Ingrese la cedula","autocomplete","off"],["formControlName","CARGO","matInput","","placeholder","Ingrese el cargo","autocomplete","off"],["formControlName","CONTRASENA","type","password","matInput","","placeholder","Ingrese Contrase\xf1a","autocomplete","off"],["formControlName","OBSERVACIONES","matInput","","placeholder","Ingrese Observaciones","autocomplete","off"],["align","end"],["type","button","mat-button","",3,"click"],["type","submit","mat-button","","cdkFocusInitial",""]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.addEditDirectiva()}),t.TgZ(1,"h2",1),t._uU(2,"Agregar Directiva"),t.qZA(),t.TgZ(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"ID"),t.qZA(),t._UZ(9,"input",6),t.qZA()(),t.TgZ(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Cedula"),t.qZA(),t._UZ(14,"input",7),t.qZA()(),t.TgZ(15,"div",4)(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"Cargo"),t.qZA(),t._UZ(19,"input",8),t.qZA()(),t.TgZ(20,"div",4)(21,"mat-form-field",5)(22,"mat-label"),t._uU(23,"Contrase\xf1a"),t.qZA(),t._UZ(24,"input",9),t.qZA()(),t.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"mat-label"),t._uU(28,"Observaciones"),t.qZA(),t._UZ(29,"input",10),t.qZA()()()(),t.TgZ(30,"mat-dialog-actions",11)(31,"button",12),t.NdJ("click",function(){return a.cancelar()}),t._uU(32,"Cancelar"),t.qZA(),t.TgZ(33,"button",13),t._uU(34,"Aceptar"),t.qZA()()()),2&e&&t.Q6J("formGroup",a.form)},dependencies:[D.Nt,g.KE,g.hX,h.lW,n._Y,n.Fj,n.JJ,n.JL,l.uh,l.xY,l.H8,n.sg,n.u],styles:[".formulario[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.columnas[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;width:100%}.columna[_ngcontent-%COMP%]{width:100%}"]})}return o})();var E=r(3577),I=r(7935),v=r(494),O=r(6724),S=r(2823);let R=(()=>{class o{constructor(i,e,a){this.fb=i,this._adminService=e,this.dialog=a,this.records=[],this.data=[],this.metaDataColumns=[{field:"ID_DET_DIR",title:"ID"},{field:"CED_USU_DIR",title:"CEDULA"},{field:"A\xd1O_ING",title:"A\xd1O INGRESO"},{field:"CARGO",title:"CARGO"},{field:"ESTADO",title:"ESTADO"},{field:"OBSERVACIONES",title:"OBSERVACION"},{field:"acciones",title:"ACCIONES"}],this.totalRecords=this.records.length,this.formulario=this.fb.group({ID_SESION_ACT:[null,n.kI.required],DOCUMENTO:[null,n.kI.required],OBSERVACION:[null,n.kI.maxLength(50)]}),this.cargarDatos(),this.changePage(0)}ngOnInit(){}onFileSelected(i){const e=i.target.files[0];e&&this.formulario.patchValue({DOCUMENTO:e})}cargarDatos(){this._adminService.getAdministracionPhp().subscribe(i=>{this.records=i.map(e=>({ID_DET_DIR:e.ID_DET_DIR,CED_USU_DIR:e.CED_USU_DIR,A\u00d1O_ING:e.A\u00d1O_ING,CARGO:e.CARGO,ESTADO:e.ESTADO,OBSERVACIONES:e.OBSERVACIONES,acciones:[{icon:"edit",tooltip:"Editar ",color:"primary"},{icon:"delete",tooltip:"Eliminar ",color:"warn"}]})),this.totalRecords=this.records.length,this.changePage(0)})}guardar(){this._adminService.postAdministracion({ID_SESION_ACT:this.formulario.value.ID_SESION_ACT,DOCUMENTO:this.formulario.value.DOCUMENTO,OBSERVACION:this.formulario.value.OBSERVACION}).subscribe(e=>{console.log("Datos insertados con \xe9xito"),this.cargarDatos()},e=>{console.error("Error al insertar datos:",e)})}ejecutarAccion(i,e){"edit"===i.icon?(console.log("Editando fila:",e),this.dialog.open(f,{width:"600px",data:{cedula:e.CED_USU,lecActual:e.LEC_ACT,lecAnterior:e.LEC_ANT,metodo:this.cargarDatos()}}).afterClosed().subscribe(s=>{s&&(console.log("Hola:",s),this.cargarDatos())})):"delete"===i.icon&&(console.log("Eliminando fila:",e),window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta fila?")&&this._adminService.deleteAdminstracion(e.ID_DET_DIR).subscribe(s=>{console.log("ELIMINADO \xe9xito"),this.cargarDatos()},s=>{console.error("Error al insertar ELIMNAR:",s)}))}openAddEditDialog(){this.dialog.open(f,{width:"700px"}).afterClosed().subscribe(e=>{e&&this.cargarDatos()})}changePage(i){const e=u.N.PAGE_SIZE,a=e*i;this.data=this.records.slice(a,a+e)}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(p),t.Y36(l.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["gst-directiva"]],decls:7,vars:3,consts:[["mat-raised-button","","color","primary",3,"click"],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"]],template:function(e,a){1&e&&(t.TgZ(0,"gst-container")(1,"button",0),t.NdJ("click",function(){return a.openAddEditDialog()}),t._uU(2,"Agregar nuevo Directiva"),t.qZA(),t.TgZ(3,"ng-scrollbar",1)(4,"gst-table",2),t.NdJ("actionClicked",function(c){return a.ejecutarAccion(c.accion,c.rowData)}),t.qZA()(),t.TgZ(5,"gst-paginator",3),t.NdJ("onChangePage",function(c){return a.changePage(c)}),t.qZA()(),t._UZ(6,"gst-spiner")),2&e&&(t.xp6(4),t.Q6J("data",a.data)("metaDataColumns",a.metaDataColumns),t.xp6(1),t.Q6J("length",a.totalRecords))},dependencies:[E.e,I.a,v.J,O.O,h.lW,S.KC]})}return o})();const N=[{path:"",component:(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["gst-principal"]],decls:1,vars:0,template:function(e,a){1&e&&t._UZ(0,"gst-directiva")},dependencies:[R]})}return o})()}];let U=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(N),m.Bz]})}return o})();var T=r(3223),Z=r(843);let y=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[A.ez,U,T.Y,Z.m]})}return o})()}}]);