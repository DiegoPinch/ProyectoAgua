"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[612],{5612:(Va,ee,l)=>{l.r(ee),l.d(ee,{LecturasModule:()=>Ba});var Y=l(6814),F=l(1896),o=l(5879),te=l(6385),ae=l(4104);let Te=(()=>{class n{constructor(e){this.router=e,this.activeTabIndex=0;const t=localStorage.getItem("activeLecturas");null!==t&&(this.activeTabIndex=+t)}onTabChange(e){switch(this.activeTabIndex=e.index,localStorage.setItem("activeLecturas",this.activeTabIndex.toString()),e.index){case 0:this.router.navigateByUrl("/servicios/lecturas/ingresar");break;case 1:this.router.navigateByUrl("/servicios/lecturas/editar")}}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36(F.F0))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-page-lecturas"]],decls:6,vars:1,consts:[["mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedIndex","selectedTabChange"],["label","INGRESAR LECTURAS"],["label","EDITAR LECTURAS"]],template:function(t,a){1&t&&(o.TgZ(0,"mat-tab-group",0),o.NdJ("selectedTabChange",function(s){return a.onTabChange(s)}),o._UZ(1,"mat-tab",1)(2,"mat-tab",2),o.qZA(),o._UZ(3,"mat-divider"),o.TgZ(4,"body"),o._UZ(5,"router-outlet"),o.qZA()),2&t&&o.Q6J("selectedIndex",a.activeTabIndex)},dependencies:[F.lC,te.d,ae.uX,ae.SP],styles:[".edit-icon[_ngcontent-%COMP%]{color:green}.delete-icon[_ngcontent-%COMP%]{color:red}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 4px 2px -2px #0003;background-color:#c5cae9}.custom-button[_ngcontent-%COMP%]{font-size:16px}"]})}return n})();var re=l(9413),f=l(6223),O=l(7700),_e=l(1686),G=l(2948),Ee=l(6185),Se=l(2939),Oe=l(7845),D=l(3814),De=l(617),H=l(2032),A=l(9157),ne=l(2296),Ue=l(1274);const Pe=["inputNombre"],Ae=["inputCedula"],Ie=["inputMedidor"],Ne=["inputMes"],Le=["inputAnterior"];function Re(n,r){1&n&&(o.TgZ(0,"span"),o._uU(1," Es una lectura "),o.TgZ(2,"strong"),o._uU(3,"incorrecta"),o.qZA()())}let xe=(()=>{class n{constructor(e,t,a,i,s,u,m,d){this._medidoresService=e,this._facturas=t,this.dialogRef=a,this.dialog=i,this.fb=s,this.data=u,this.snackBar=m,this._servTarifa=d,this.estado="",this.metCubicosC=0,this.basicoC=0,this.excesoC=0,this.metCubicosR=0,this.basicoR=0,this.excesoR=0,this.lecturaForm=this.fb.group({CED_USU:["",f.kI.required],NOMBRES:["",f.kI.required],TIP_MED:["",f.kI.required],LEC_ANT:["",f.kI.required],LEC_ACT:["",[f.kI.required,this.verificarLecturaIngreso.bind(this)]],MES_CON:["",f.kI.required]}),this.obtenerTarifaConsumo(),this.obtenerTarifaRiego(),this.obtenerValorConsumo(),this.obtenerValorRiego()}ngAfterViewInit(){this.bloquearEntradaTexto()}bloquearEntradaTexto(){this.inputCedula.nativeElement.addEventListener("keydown",e=>{e.preventDefault()}),this.inputNombre.nativeElement.addEventListener("keydown",e=>{e.preventDefault()}),this.inputMedidor.nativeElement.addEventListener("keydown",e=>{e.preventDefault()}),this.inputAnterior.nativeElement.addEventListener("keydown",e=>{e.preventDefault()}),this.inputMes.nativeElement.addEventListener("keydown",e=>{e.preventDefault()})}ngOnInit(){this.data&&this.data.rowData.CED_USU&&this._medidoresService.getLecturaActual(this.data.rowData.CED_USU,this.data.selectedTipo,this.data.selectedMesResta).subscribe(e=>{if(Array.isArray(e)&&e.length>0){const t=e[0];this.estado=t.MES_CON,void 0!==t.LEC_ACT&&this.setearDatos(t.LEC_ACT)}else this.obtenerUltimaLectura(this.data.rowData.ID_MED)},e=>{console.error("Error al cargar datos:",e)})}obtenerUltimaLectura(e){this._medidoresService.getultimaLecturaInsertada(e).subscribe(t=>{if(t&&t.length>0){const a=t[0];this.estado=a.MES_CON,this.setearDatos(a.LEC_ACT)}else this.obtenerLecturaInsert(e)},t=>{console.error("Error al obtener los datos:",t)})}obtenerLecturaInsert(e){this._medidoresService.getLecturaIngresoMedidor(e).subscribe(t=>{t&&t.length>0&&(this.estado="NUEVO MEDIDOR",this.setearDatos(t[0].LEC_ING))},t=>{console.error("Error al obtener los datos:",t)})}setearDatos(e){this.lecturaForm.patchValue({CED_USU:this.data.rowData.CED_USU,TIP_MED:this.data.selectedTipo,MES_CON:this.data.selectedMes,LEC_ANT:e,NOMBRES:this.data.rowData.APE_USU+" "+this.data.rowData.NOM_USU})}verificarLecturaExis(){this._medidoresService.verificarLecturaExistente(this.data.selectedMes,this.data.rowData.ID_MED).subscribe(e=>{e&&e.length>0?this.mensajeError("Medidor con lectura existente en el mes seleccionado"):this.guardarLectura()},e=>{console.error("Error al verificar la lectura existente:",e)})}mensajeError(e){this.dialog.open(_e.t,{data:{title:"Aviso",message:e}})}guardarLectura(){const e=localStorage.getItem("tarifaConsumo"),t=localStorage.getItem("tarifaRiego");if(e&&t)if(null!==this.excesoC&&null!==this.basicoC&&this.metCubicosC&&null!==this.excesoR&&null!==this.basicoR&&this.metCubicosR){if(this.lecturaForm.valid){const a=this.lecturaForm.get("LEC_ANT")?.value,i=this.lecturaForm.get("LEC_ACT")?.value;if(!this.esLecturaValida(a,i))return void this.mensajeError("La lectura Actual debe ser mayor a la Lectura Anterior");const s=i-a,{exceso:u,total:m}=this.calcularExcesoYTotal(s),d=(new Date).toISOString().slice(0,10);this._medidoresService.postLecturas(a,i,d,this.data.selectedMes,this.data.rowData.ID_MED).subscribe(g=>{const b=g.ID_LEC;this.cerrarModal(),this.showMessage("Lectura insertada correctamente... "),this.generarFactura(u,m,b)},g=>{console.error("Error al insertar datos:",g)})}}else this.mensajeError("No existen las tarifas para realizar la factura");else this.mensajeError("No existen las tarifas para realizar la factura")}calcularExcesoYTotal(e){let t=0,a=0;return"CONSUMO"===this.data.selectedTipo?e>=this.metCubicosC?(t=e-this.metCubicosC,a=this.basicoC+t*this.excesoC):a=this.basicoC:"RIEGO"===this.data.selectedTipo&&(e>=this.metCubicosR?(t=e-this.metCubicosR,a=this.basicoR+t*this.excesoR):a=this.basicoR),{exceso:t,total:+a.toFixed(2)}}obtenerTarifaConsumo(){const e=localStorage.getItem("tarifaConsumo");if(e)try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){const{met_cubicos:a,basico:i,exceso:s}=t[0];this.metCubicosC=a,this.basicoC=i,this.excesoC=s}else console.log("El array est\xe1 vac\xedo o no es v\xe1lido")}catch(t){console.error("Error al analizar datos del localStorage:",t)}else console.log("Las tarifas no est\xe1n disponibles en el localStorage."),this.obtenerValorConsumo()}obtenerTarifaRiego(){const e=localStorage.getItem("tarifaRiego");if(e)try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){const{met_cubicos:a,basico:i,exceso:s}=t[0];this.metCubicosR=a,this.basicoR=i,this.excesoR=s}else console.log("El array est\xe1 vac\xedo o no es v\xe1lido")}catch(t){console.error("Error al analizar datos del localStorage:",t)}else console.log("Las tarifas no est\xe1n disponibles en el localStorage."),this.obtenerValorRiego()}obtenerValorConsumo(){this._servTarifa.getTarifasConsumo().subscribe(e=>{localStorage.setItem("tarifaConsumo",JSON.stringify(e))},e=>{console.error("Error al obtener las tarifas:",e)})}obtenerValorRiego(){this._servTarifa.getTarifasRiego().subscribe(e=>{localStorage.setItem("tarifaRiego",JSON.stringify(e))},e=>{console.error("Error al obtener las tarifas:",e)})}generarFactura(e,t,a){const i={FEC_PAGO:null,FEC_GENE:(new Date).toISOString().slice(0,10),EST_FACT:"PENDIENTE",EXC_LECTURA:e,SUM_TOTAL:t,ID_LEC_PER:a};this._facturas.postFacturas(i).subscribe(s=>{},s=>{console.error("Error al crear Factura:",s)})}cerrarModal(){this.dialogRef.close()}showMessage(e,t=5e3){this.snackBar.open(e,"",{duration:t})}verificarLecturaIngreso(e){if(!e.dirty||!e.value)return null;const t=parseFloat(this.lecturaForm.get("LEC_ANT")?.value);return parseFloat(e.value)>=t?null:{lecturaInvalida:!0}}esLecturaValida(e,t){return t>=e}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36(G.I),o.Y36(Ee.m),o.Y36(O.so),o.Y36(O.uw),o.Y36(f.qu),o.Y36(O.WI),o.Y36(Se.ux),o.Y36(Oe.c))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-ingresar-editar"]],viewQuery:function(t,a){if(1&t&&(o.Gf(Pe,5),o.Gf(Ae,5),o.Gf(Ie,5),o.Gf(Ne,5),o.Gf(Le,5)),2&t){let i;o.iGM(i=o.CRH())&&(a.inputNombre=i.first),o.iGM(i=o.CRH())&&(a.inputCedula=i.first),o.iGM(i=o.CRH())&&(a.inputMedidor=i.first),o.iGM(i=o.CRH())&&(a.inputMes=i.first),o.iGM(i=o.CRH())&&(a.inputAnterior=i.first)}},decls:51,vars:4,consts:[["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],["fxLayout","column",3,"formGroup"],["fxLayout","row","fxLayoutGap","24px"],["appearance","outline"],["formControlName","CED_USU","matInput","","autocomplete","off"],["inputCedula",""],["formControlName","NOMBRES","matInput","","autocomplete","off"],["inputNombre",""],["formControlName","TIP_MED","matInput","","autocomplete","off"],["inputMedidor",""],["formControlName","MES_CON","matInput","","autocomplete","off"],["inputMes",""],["formControlName","LEC_ANT","matInput","","autocomplete","off"],["inputAnterior",""],["formControlName","LEC_ACT","matInput","","type","number","placeholder","Ingrese Lectura Actual","autocomplete","off"],[1,"error"],[4,"ngIf"],["fxLayout","","fxLayoutAlign","end","fxLayoutGap","10px"],["mat-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"]],template:function(t,a){if(1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"h3"),o._uU(2,"Ingresar Lectura"),o.qZA(),o.TgZ(3,"button",1)(4,"mat-icon"),o._uU(5,"close"),o.qZA()()(),o.TgZ(6,"mat-dialog-content")(7,"form",2)(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),o._uU(11," C\xe9dula "),o.qZA(),o._UZ(12,"input",5,6),o.qZA(),o.TgZ(14,"mat-form-field",4)(15,"mat-label"),o._uU(16," Nombres "),o.qZA(),o._UZ(17,"input",7,8),o.qZA()(),o.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"mat-label"),o._uU(22," Tipo "),o.qZA(),o._UZ(23,"input",9,10),o.qZA(),o.TgZ(25,"mat-form-field",4)(26,"mat-label"),o._uU(27,"Mes Actual"),o.qZA(),o._UZ(28,"input",11,12),o.qZA()(),o.TgZ(30,"div",3)(31,"div")(32,"mat-form-field",4)(33,"mat-label"),o._uU(34," Lectura Anterior "),o.qZA(),o._UZ(35,"input",13,14),o.TgZ(37,"span"),o._uU(38),o.qZA()()(),o.TgZ(39,"div")(40,"mat-form-field",4)(41,"mat-label"),o._uU(42,"Lectura Actual"),o.qZA(),o._UZ(43,"input",15),o.qZA(),o.TgZ(44,"div",16),o.YNc(45,Re,4,0,"span",17),o.qZA()()(),o.TgZ(46,"div",18)(47,"button",19),o.NdJ("click",function(){return a.cerrarModal()}),o._uU(48,"Cancelar"),o.qZA(),o.TgZ(49,"button",20),o.NdJ("click",function(){return a.verificarLecturaExis()}),o._uU(50," Guardar"),o.qZA()()()()),2&t){let i;o.xp6(7),o.Q6J("formGroup",a.lecturaForm),o.xp6(31),o.Oqu(a.estado),o.xp6(7),o.Q6J("ngIf",null==(i=a.lecturaForm.get("LEC_ACT"))?null:i.hasError("lecturaInvalida")),o.xp6(4),o.Q6J("disabled",a.lecturaForm.invalid)}},dependencies:[Y.O5,D.xw,D.SQ,D.Wh,De.Hw,H.Nt,A.KE,A.hX,ne.lW,ne.RK,f._Y,f.Fj,f.wV,f.JJ,f.JL,Ue.Ye,O.ZT,O.xY,f.sg,f.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:45vh}.error[_ngcontent-%COMP%]{color:brown;margin-top:-20px}"]})}return n})();var ke={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}};function I(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.width?String(r.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var qe={date:I({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:I({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:I({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Qe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},je={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"};function y(n){return function(r,e){var a;if("formatting"===(null!=e&&e.context?String(e.context):"standalone")&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,s=null!=e&&e.width?String(e.width):i;a=n.formattingValues[s]||n.formattingValues[i]}else{var u=n.defaultWidth,m=null!=e&&e.width?String(e.width):n.defaultWidth;a=n.values[m]||n.values[u]}return a[n.argumentCallback?n.argumentCallback(r):r]}}function oe(n){return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.match(n.matchPattern);if(!t)return null;var a=t[0],i=r.match(n.parsePattern);if(!i)return null;var s=n.valueCallback?n.valueCallback(i[0]):i[0];return{value:s=e.valueCallback?e.valueCallback(s):s,rest:r.slice(a.length)}}}function T(n){return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.width,i=r.match(t&&n.matchPatterns[t]||n.matchPatterns[n.defaultMatchWidth]);if(!i)return null;var d,s=i[0],u=t&&n.parsePatterns[t]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(u)?function ot(n,r){for(var e=0;e<n.length;e++)if(r(n[e]))return e}(u,function(h){return h.test(s)}):function nt(n,r){for(var e in n)if(n.hasOwnProperty(e)&&r(n[e]))return e}(u,function(h){return h.test(s)});return d=n.valueCallback?n.valueCallback(m):m,{value:d=e.valueCallback?e.valueCallback(d):d,rest:r.slice(s.length)}}}const wt={code:"es",formatDistance:function(r,e,t){var a,i=ke[r];return a="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"en "+a:"hace "+a:a},formatLong:qe,formatRelative:function(r,e,t,a){return 1!==e.getUTCHours()?je[r]:Qe[r]},localize:{ordinalNumber:function(r,e){return Number(r)+"\xba"},era:y({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:y({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(r){return Number(r)-1}}),month:y({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:y({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:y({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:oe({matchPattern:/^(\d+)(\xba)?/i,parsePattern:/\d+/i,valueCallback:function(r){return parseInt(r,10)}}),era:T({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u\xfa]n|despu[e\xe9]s de cristo|era com[u\xfa]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u\xfa]n)/i,/^(despu[e\xe9]s de cristo|era com[u\xfa]n)/i]},defaultParseWidth:"any"}),quarter:T({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](\xba)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:T({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:T({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[\xe1a])/i,abbreviated:/^(dom|lun|mar|mi[\xe9e]|jue|vie|s[\xe1a]b)/i,wide:/^(domingo|lunes|martes|mi[\xe9e]rcoles|jueves|viernes|s[\xe1a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (ma\xf1ana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (ma\xf1ana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/ma\xf1ana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function _(n){if(null===n||!0===n||!1===n)return NaN;var r=Number(n);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function Z(n){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(n)}function v(n,r){if(r.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+r.length+" present")}function w(n){v(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===Z(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):(("string"==typeof n||"[object String]"===r)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function J(n){v(1,arguments);var e=w(n),t=e.getUTCDay(),a=(t<1?7:0)+t-1;return e.setUTCDate(e.getUTCDate()-a),e.setUTCHours(0,0,0,0),e}function ie(n){v(1,arguments);var r=w(n),e=r.getUTCFullYear(),t=new Date(0);t.setUTCFullYear(e+1,0,4),t.setUTCHours(0,0,0,0);var a=J(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var s=J(i);return r.getTime()>=a.getTime()?e+1:r.getTime()>=s.getTime()?e:e-1}var se={};function q(){return se}function B(n,r){var e,t,a,i,s,u,m,d;v(1,arguments);var p=q(),h=_(null!==(e=null!==(t=null!==(a=null!==(i=r?.weekStartsOn)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:p.weekStartsOn)&&void 0!==t?t:null===(m=p.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==e?e:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=w(n),b=g.getUTCDay(),M=(b<h?7:0)+b-h;return g.setUTCDate(g.getUTCDate()-M),g.setUTCHours(0,0,0,0),g}function le(n,r){var e,t,a,i,s,u,m,d;v(1,arguments);var p=w(n),h=p.getUTCFullYear(),g=q(),b=_(null!==(e=null!==(t=null!==(a=null!==(i=r?.firstWeekContainsDate)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:g.firstWeekContainsDate)&&void 0!==t?t:null===(m=g.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=new Date(0);M.setUTCFullYear(h+1,0,b),M.setUTCHours(0,0,0,0);var R=B(M,r),P=new Date(0);P.setUTCFullYear(h,0,b),P.setUTCHours(0,0,0,0);var x=B(P,r);return p.getTime()>=R.getTime()?h+1:p.getTime()>=x.getTime()?h:h-1}function c(n,r){for(var e=n<0?"-":"",t=Math.abs(n).toString();t.length<r;)t="0"+t;return e+t}const E_y=function(r,e){var t=r.getUTCFullYear(),a=t>0?t:1-t;return c("yy"===e?a%100:a,e.length)},E_M=function(r,e){var t=r.getUTCMonth();return"M"===e?String(t+1):c(t+1,2)},E_d=function(r,e){return c(r.getUTCDate(),e.length)},E_h=function(r,e){return c(r.getUTCHours()%12||12,e.length)},E_H=function(r,e){return c(r.getUTCHours(),e.length)},E_m=function(r,e){return c(r.getUTCMinutes(),e.length)},E_s=function(r,e){return c(r.getUTCSeconds(),e.length)},E_S=function(r,e){var t=e.length,a=r.getUTCMilliseconds();return c(Math.floor(a*Math.pow(10,t-3)),e.length)};function ue(n,r){var e=n>0?"-":"+",t=Math.abs(n),a=Math.floor(t/60),i=t%60;if(0===i)return e+String(a);var s=r||"";return e+String(a)+s+c(i,2)}function ce(n,r){return n%60==0?(n>0?"-":"+")+c(Math.abs(n)/60,2):U(n,r)}function U(n,r){var e=r||"",t=n>0?"-":"+",a=Math.abs(n);return t+c(Math.floor(a/60),2)+e+c(a%60,2)}const kt={G:function(r,e,t){var a=r.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});default:return t.era(a,{width:"wide"})}},y:function(r,e,t){if("yo"===e){var a=r.getUTCFullYear();return t.ordinalNumber(a>0?a:1-a,{unit:"year"})}return E_y(r,e)},Y:function(r,e,t,a){var i=le(r,a),s=i>0?i:1-i;return"YY"===e?c(s%100,2):"Yo"===e?t.ordinalNumber(s,{unit:"year"}):c(s,e.length)},R:function(r,e){return c(ie(r),e.length)},u:function(r,e){return c(r.getUTCFullYear(),e.length)},Q:function(r,e,t){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return c(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,e,t){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return c(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,e,t){var a=r.getUTCMonth();switch(e){case"M":case"MM":return E_M(r,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(r,e,t){var a=r.getUTCMonth();switch(e){case"L":return String(a+1);case"LL":return c(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(r,e,t,a){var i=function Lt(n,r){v(1,arguments);var e=w(n),t=B(e,r).getTime()-function It(n,r){var e,t,a,i,s,u,m,d;v(1,arguments);var p=q(),h=_(null!==(e=null!==(t=null!==(a=null!==(i=r?.firstWeekContainsDate)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:p.firstWeekContainsDate)&&void 0!==t?t:null===(m=p.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1),g=le(n,r),b=new Date(0);return b.setUTCFullYear(g,0,h),b.setUTCHours(0,0,0,0),B(b,r)}(e,r).getTime();return Math.round(t/6048e5)+1}(r,a);return"wo"===e?t.ordinalNumber(i,{unit:"week"}):c(i,e.length)},I:function(r,e,t){var a=function At(n){v(1,arguments);var r=w(n),e=J(r).getTime()-function Ut(n){v(1,arguments);var r=ie(n),e=new Date(0);return e.setUTCFullYear(r,0,4),e.setUTCHours(0,0,0,0),J(e)}(r).getTime();return Math.round(e/6048e5)+1}(r);return"Io"===e?t.ordinalNumber(a,{unit:"week"}):c(a,e.length)},d:function(r,e,t){return"do"===e?t.ordinalNumber(r.getUTCDate(),{unit:"date"}):E_d(r,e)},D:function(r,e,t){var a=function Dt(n){v(1,arguments);var r=w(n),e=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var t=r.getTime();return Math.floor((e-t)/864e5)+1}(r);return"Do"===e?t.ordinalNumber(a,{unit:"dayOfYear"}):c(a,e.length)},E:function(r,e,t){var a=r.getUTCDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(r,e,t,a){var i=r.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return c(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,a){var i=r.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return c(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){var a=r.getUTCDay(),i=0===a?7:a;switch(e){case"i":return String(i);case"ii":return c(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(r,e,t){var i=r.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){var i,a=r.getUTCHours();switch(i=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){var i,a=r.getUTCHours();switch(i=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if("ho"===e){var a=r.getUTCHours()%12;return 0===a&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return E_h(r,e)},H:function(r,e,t){return"Ho"===e?t.ordinalNumber(r.getUTCHours(),{unit:"hour"}):E_H(r,e)},K:function(r,e,t){var a=r.getUTCHours()%12;return"Ko"===e?t.ordinalNumber(a,{unit:"hour"}):c(a,e.length)},k:function(r,e,t){var a=r.getUTCHours();return 0===a&&(a=24),"ko"===e?t.ordinalNumber(a,{unit:"hour"}):c(a,e.length)},m:function(r,e,t){return"mo"===e?t.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):E_m(r,e)},s:function(r,e,t){return"so"===e?t.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):E_s(r,e)},S:function(r,e){return E_S(r,e)},X:function(r,e,t,a){var s=(a._originalDate||r).getTimezoneOffset();if(0===s)return"Z";switch(e){case"X":return ce(s);case"XXXX":case"XX":return U(s);default:return U(s,":")}},x:function(r,e,t,a){var s=(a._originalDate||r).getTimezoneOffset();switch(e){case"x":return ce(s);case"xxxx":case"xx":return U(s);default:return U(s,":")}},O:function(r,e,t,a){var s=(a._originalDate||r).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ue(s,":");default:return"GMT"+U(s,":")}},z:function(r,e,t,a){var s=(a._originalDate||r).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ue(s,":");default:return"GMT"+U(s,":")}},t:function(r,e,t,a){return c(Math.floor((a._originalDate||r).getTime()/1e3),e.length)},T:function(r,e,t,a){return c((a._originalDate||r).getTime(),e.length)}};var de=function(r,e){switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},me=function(r,e){switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const Ft={p:me,P:function(r,e){var s,t=r.match(/(P+)(p+)?/)||[],a=t[1],i=t[2];if(!i)return de(r,e);switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;default:s=e.dateTime({width:"full"})}return s.replace("{{date}}",de(a,e)).replace("{{time}}",me(i,e))}};var Jt=["D","DD"],qt=["YY","YYYY"];function he(n,r,e){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var jt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};var zt={date:I({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:I({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:I({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const Sa={code:"en-US",formatDistance:function(r,e,t){var a,i=jt[r];return a="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a},formatLong:zt,formatRelative:function(r,e,t,a){return ea[r]},localize:{ordinalNumber:function(r,e){var t=Number(r),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:y({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:y({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:y({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:y({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:y({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:oe({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(r){return parseInt(r,10)}}),era:T({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:T({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:T({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:T({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Oa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Da=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ua=/^'([^]*?)'?$/,Pa=/''/g,Aa=/[a-zA-Z]/;function Ia(n,r,e){var t,a,i,s,u,m,d,p,h,g,b,M,R,P,x,$,V,X;v(2,arguments);var Qa=String(r),k=q(),W=null!==(t=null!==(a=e?.locale)&&void 0!==a?a:k.locale)&&void 0!==t?t:Sa,z=_(null!==(i=null!==(s=null!==(u=null!==(m=e?.firstWeekContainsDate)&&void 0!==m?m:null==e||null===(d=e.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==u?u:k.firstWeekContainsDate)&&void 0!==s?s:null===(h=k.locale)||void 0===h||null===(g=h.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==i?i:1);if(!(z>=1&&z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var K=_(null!==(b=null!==(M=null!==(R=null!==(P=e?.weekStartsOn)&&void 0!==P?P:null==e||null===(x=e.locale)||void 0===x||null===($=x.options)||void 0===$?void 0:$.weekStartsOn)&&void 0!==R?R:k.weekStartsOn)&&void 0!==M?M:null===(V=k.locale)||void 0===V||null===(X=V.options)||void 0===X?void 0:X.weekStartsOn)&&void 0!==b?b:0);if(!(K>=0&&K<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!W.localize)throw new RangeError("locale must contain localize property");if(!W.formatLong)throw new RangeError("locale must contain formatLong property");var Q=w(n);if(!function _t(n){if(v(1,arguments),!function Tt(n){return v(1,arguments),n instanceof Date||"object"===Z(n)&&"[object Date]"===Object.prototype.toString.call(n)}(n)&&"number"!=typeof n)return!1;var r=w(n);return!isNaN(Number(r))}(Q))throw new RangeError("Invalid time value");var ja=function Zt(n){var r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),n.getTime()-r.getTime()}(Q),Ga=function St(n,r){return v(2,arguments),function Et(n,r){v(2,arguments);var e=w(n).getTime(),t=_(r);return new Date(e+t)}(n,-_(r))}(Q,ja),Ha={firstWeekContainsDate:z,weekStartsOn:K,locale:W,_originalDate:Q},$a=Qa.match(Da).map(function(C){var S=C[0];return"p"===S||"P"===S?(0,Ft[S])(C,W.formatLong):C}).join("").match(Oa).map(function(C){if("''"===C)return"'";var S=C[0];if("'"===S)return function Na(n){var r=n.match(Ua);return r?r[1].replace(Pa,"'"):n}(C);var j=kt[S];if(j)return!(null!=e&&e.useAdditionalWeekYearTokens)&&function Qt(n){return-1!==qt.indexOf(n)}(C)&&he(C,r,String(n)),!(null!=e&&e.useAdditionalDayOfYearTokens)&&function Bt(n){return-1!==Jt.indexOf(n)}(C)&&he(C,r,String(n)),j(Ga,C,W.localize,Ha);if(S.match(Aa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return C}).join("");return $a}var L=l(5313),fe=l(7606),ge=l(8525),ve=l(3680),pe=l(2823),be=l(3577),Ce=l(7935),we=l(494),Me=l(6724);function La(n,r){if(1&n&&(o.TgZ(0,"mat-option",12),o._uU(1),o.qZA()),2&n){const e=r.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}function Ra(n,r){if(1&n&&(o.TgZ(0,"mat-option",13),o._uU(1),o.qZA()),2&n){const e=r.$implicit,t=o.oxw();o.Q6J("value",e)("disabled",t.esMesPosterior(e)),o.xp6(1),o.Oqu(e)}}let xa=(()=>{class n{constructor(e,t,a){this._lecturaService=e,this.fechaHoraService=t,this.dialog=a,this.records=[],this.mesesDelAnio=[],this.selectedMesResta="",this.selectedMes="",this.defaultMes="",this.selectedTipo="CONSUMO",this.options=["CONSUMO","RIEGO"],this.showSpinner=!1,this.showSpinnerA=!1,this.metaDataColumns=[{field:"CED_USU",title:"CEDULA"},{field:"NOM_USU",title:"NOMBRE"},{field:"APE_USU",title:"APELLIDO"},{field:"acciones",title:"ACCIONES"}],this.totalRecords=0}ngOnInit(){this.getFechaHoraActual()}cargarDatos(){this.showSpinner=!0;const e=this.selectedTipo;e&&this._lecturaService.getPersonaMedidor(e).subscribe(t=>{this.records=this.formatData(t),this.dataSource=new L.by(this.records),this.totalRecords=this.records.length,this.changePage(0),this.showSpinner=!1})}ejecutarAccion(e,t){"input"===e.icon&&this.dialog.open(xe,{data:{rowData:t,selectedTipo:this.selectedTipo,selectedMes:this.selectedMes,selectedMesResta:this.selectedMesResta,defaultMes:this.defaultMes}}).afterClosed().subscribe(i=>{i&&console.log("Datos editados:")})}applyFilter(e){const t=e.target.value.trim().toLowerCase(),a=this.records.filter(i=>i.CED_USU.toLowerCase().includes(t)||i.NOM_USU.toLowerCase().includes(t)||i.APE_USU.toLowerCase().includes(t));this.dataSource=new L.by(a),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changePage(e){const t=re.N.PAGE_SIZE,a=t*e;this.dataSource.data=this.records.slice(a,a+t)}getFechaHoraActual(){this.showSpinnerA=!0,this.fechaHoraService.obtenerFechaHoraActual().subscribe(e=>{this.fechaActual=new Date(e.datetime),this.generarMesesDelAnio(),this.selectedMes=this.getMesActual(),this.defaultMes=this.getMesActual(),this.restarUnMes(this.selectedMes),this.cargarDatos(),this.showSpinnerA=!1},e=>{console.error("Error al obtener la fecha actual:",e)})}esMesPosterior(e){const t=this.fechaActual.getFullYear(),a=this.fechaActual.getMonth()+1,[i,s]=e.split("-"),u=ye(s);return+i>t||+i===t&&u>a}generarMesesDelAnio(){const e=this.fechaActual.getFullYear();this.mesesDelAnio=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].map(a=>`${e}-${a}`)}getMesActual(){return`${this.fechaActual.getFullYear()}-${["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"][this.fechaActual.getMonth()]}`}restarUnMes(e){if(e){const[t,a]=e.split("-"),s=function yt(n,r){return v(2,arguments),function Mt(n,r){v(2,arguments);var e=w(n),t=_(r);if(isNaN(t))return new Date(NaN);if(!t)return e;var a=e.getDate(),i=new Date(e.getTime());return i.setMonth(e.getMonth()+t+1,0),a>=i.getDate()?i:(e.setFullYear(i.getFullYear(),i.getMonth(),a),e)}(n,-_(r))}(new Date(parseInt(t),ye(a)-1,1),1);this.selectedMesResta=Ia(s,"yyyy-MMMM",{locale:wt}).toUpperCase()}}formatData(e){return e.map(t=>({CED_USU:t.CED_USU,NOM_USU:t.NOM_USU,APE_USU:t.APE_USU,ID_MED:t.ID_MED,acciones:[{icon:"input",tooltip:"Ingresar Lectura",color:"primary"}]}))}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36(G.I),o.Y36(fe.z),o.Y36(O.uw))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-page-ingresolecturas"]],decls:23,vars:9,consts:[[3,"showSpinner"],["fxLayout","","fxLayoutGap","20px"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["matInput","","placeholder","Ingrese datos a buscar","autocomplete","off",3,"keyup"],["input",""],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[3,"value"],[3,"value","disabled"]],template:function(t,a){1&t&&(o._UZ(0,"gst-spiner",0),o.TgZ(1,"gst-container")(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),o._uU(5,"Selecciona una opci\xf3n"),o.qZA(),o.TgZ(6,"mat-select",3),o.NdJ("ngModelChange",function(s){return a.selectedTipo=s})("selectionChange",function(){return a.cargarDatos()}),o.YNc(7,La,2,2,"mat-option",4),o.qZA()(),o.TgZ(8,"mat-form-field",2)(9,"mat-label"),o._uU(10,"Selecciona un mes"),o.qZA(),o.TgZ(11,"mat-select",5),o.NdJ("ngModelChange",function(s){return a.selectedMes=s})("ngModelChange",function(s){return a.restarUnMes(s)}),o.YNc(12,Ra,2,3,"mat-option",6),o.qZA(),o._UZ(13,"gst-spiner",0),o.qZA(),o.TgZ(14,"mat-form-field",2)(15,"mat-label"),o._uU(16,"Buscar"),o.qZA(),o.TgZ(17,"input",7,8),o.NdJ("keyup",function(s){return a.applyFilter(s)}),o.qZA()()(),o._UZ(19,"mat-divider"),o.TgZ(20,"ng-scrollbar",9)(21,"gst-table",10),o.NdJ("actionClicked",function(s){return a.ejecutarAccion(s.accion,s.rowData)}),o.qZA()(),o.TgZ(22,"gst-paginator",11),o.NdJ("onChangePage",function(s){return a.changePage(s)}),o.qZA()()),2&t&&(o.Q6J("showSpinner",a.showSpinner),o.xp6(6),o.Q6J("ngModel",a.selectedTipo),o.xp6(1),o.Q6J("ngForOf",a.options),o.xp6(4),o.Q6J("ngModel",a.selectedMes),o.xp6(1),o.Q6J("ngForOf",a.mesesDelAnio),o.xp6(1),o.Q6J("showSpinner",a.showSpinnerA),o.xp6(8),o.Q6J("data",a.dataSource)("metaDataColumns",a.metaDataColumns),o.xp6(1),o.Q6J("length",a.totalRecords))},dependencies:[Y.sg,D.xw,D.SQ,H.Nt,A.KE,A.hX,f.JJ,f.On,te.d,ge.gD,ve.ey,pe.KC,be.e,Ce.a,we.J,Me.O]})}return n})();function ye(n){return["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].indexOf(n)+1}var ka=l(7624);function Wa(n,r){if(1&n&&(o.TgZ(0,"mat-option",10),o._uU(1),o.qZA()),2&n){const e=r.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}function Ya(n,r){if(1&n&&(o.TgZ(0,"mat-option",10),o._uU(1),o.qZA()),2&n){const e=r.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}const Fa=[{path:"",component:Te,children:[{path:"",redirectTo:"ingresar",pathMatch:"full"},{path:"ingresar",component:xa},{path:"editar",component:(()=>{class n{constructor(e,t,a){this._servLecturas=e,this.fechaHoraService=t,this.dialog=a,this.records=[],this.mesesDelAnio=[],this.selectedMesResta="",this.selectedMes="",this.selectedTipo="CONSUMO",this.options=["CONSUMO","RIEGO"],this.showSpinner=!1,this.showSpinnerA=!1,this.metaDataColumns=[{field:"CED_USU",title:"CEDULA"},{field:"NOM_USU",title:"NOMBRE"},{field:"APE_USU",title:"APELLIDO"},{field:"LEC_ANT",title:"LEC. ANTERIOR"},{field:"LEC_ACT",title:"LEC. ACTUAL"},{field:"MES_CON",title:"MES"},{field:"acciones",title:"ACCIONES"}],this.data=[],this.totalRecords=this.records.length,this.dataSource=new L.by(this.records),this.cargarDatos(),this.changePage(0)}ngOnInit(){this.showSpinnerA=!0,this.fechaHoraService.obtenerFechaHoraActual().subscribe(e=>{this.fechaActual=new Date(e.datetime),this.generarMesesDelAnio(),this.selectedMes=this.getMesActual(),this.cargarDatos(),this.showSpinnerA=!1},e=>{console.error("Error al obtener la fecha actual:",e)})}generarMesesDelAnio(){const e=this.fechaActual.getFullYear();this.mesesDelAnio=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].map(a=>`${e}-${a}`)}getMesActual(){return`${this.fechaActual.getFullYear()}-${["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"][this.fechaActual.getMonth()]}`}cargarDatos(){this.showSpinner=!0;const e=this.selectedTipo;e&&this._servLecturas.getLecturas(e,this.selectedMes).subscribe(a=>{this.records=a.map(i=>({CED_USU:i.CED_USU,NOM_USU:i.NOM_USU,APE_USU:i.APE_USU,LEC_ANT:i.LEC_ANT,LEC_ACT:i.LEC_ACT,MES_CON:i.MES_CON,ID_LEC:i.ID_LEC,TIPO_MED:i.TIPO_MED,acciones:[{icon:"edit",tooltip:"Editar Lectura",color:"primary"}]})),this.dataSource=new L.by(this.records),this.totalRecords=this.records.length,this.changePage(0),this.showSpinner=!1})}ejecutarAccion(e,t){"edit"===e.icon&&this.dialog.open(ka.L,{data:{rowData:t,selectedTipo:this.selectedTipo}}).afterClosed().subscribe(i=>{this.cargarDatos()})}applyFilter(e){const t=e.target.value.trim().toLowerCase(),a=this.records.filter(i=>i.CED_USU.toLowerCase().includes(t)||i.NOM_USU.toLowerCase().includes(t)||i.APE_USU.toLowerCase().includes(t));this.dataSource=new L.by(a),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changePage(e){const t=re.N.PAGE_SIZE,a=t*e;this.data=this.records.slice(a,a+t)}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36(G.I),o.Y36(fe.z),o.Y36(O.uw))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-pageeditarlecturas"]],viewQuery:function(t,a){if(1&t&&o.Gf(L.by,5),2&t){let i;o.iGM(i=o.CRH())&&(a.dataTable=i.first)}},decls:22,vars:9,consts:[[3,"showSpinner"],["fxLayout","","fxLayoutGap","20px"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Ingrese datos a buscar","autocomplete","off",3,"keyup"],["input",""],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[3,"value"]],template:function(t,a){1&t&&(o._UZ(0,"gst-spiner",0),o.TgZ(1,"gst-container")(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),o._uU(5,"Selecciona una opci\xf3n"),o.qZA(),o.TgZ(6,"mat-select",3),o.NdJ("ngModelChange",function(s){return a.selectedTipo=s})("selectionChange",function(){return a.cargarDatos()}),o.YNc(7,Wa,2,2,"mat-option",4),o.qZA()(),o.TgZ(8,"mat-form-field",2)(9,"mat-label"),o._uU(10,"Selecciona un mes"),o.qZA(),o.TgZ(11,"mat-select",3),o.NdJ("ngModelChange",function(s){return a.selectedMes=s})("selectionChange",function(){return a.cargarDatos()}),o.YNc(12,Ya,2,2,"mat-option",4),o.qZA(),o._UZ(13,"gst-spiner",0),o.qZA(),o.TgZ(14,"mat-form-field",2)(15,"mat-label"),o._uU(16,"Buscar"),o.qZA(),o.TgZ(17,"input",5,6),o.NdJ("keyup",function(s){return a.applyFilter(s)}),o.qZA()()(),o.TgZ(19,"ng-scrollbar",7)(20,"gst-table",8),o.NdJ("actionClicked",function(s){return a.ejecutarAccion(s.accion,s.rowData)}),o.qZA()(),o.TgZ(21,"gst-paginator",9),o.NdJ("onChangePage",function(s){return a.changePage(s)}),o.qZA()()),2&t&&(o.Q6J("showSpinner",a.showSpinner),o.xp6(6),o.Q6J("ngModel",a.selectedTipo),o.xp6(1),o.Q6J("ngForOf",a.options),o.xp6(4),o.Q6J("ngModel",a.selectedMes),o.xp6(1),o.Q6J("ngForOf",a.mesesDelAnio),o.xp6(1),o.Q6J("showSpinner",a.showSpinnerA),o.xp6(7),o.Q6J("data",a.dataSource)("metaDataColumns",a.metaDataColumns),o.xp6(1),o.Q6J("length",a.totalRecords))},dependencies:[Y.sg,D.xw,D.SQ,H.Nt,A.KE,A.hX,f.JJ,f.On,ge.gD,ve.ey,pe.KC,be.e,Ce.a,we.J,Me.O],styles:["mat-card[_ngcontent-%COMP%]{border:2px solid #000000;border-radius:12px}"]})}return n})()}]}];let Za=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=o.oAB({type:n});static#a=this.\u0275inj=o.cJS({imports:[F.Bz.forChild(Fa),F.Bz]})}return n})();var Ja=l(3223),qa=l(568);let Ba=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=o.oAB({type:n});static#a=this.\u0275inj=o.cJS({imports:[Y.ez,Za,qa.m,Ja.Y]})}return n})()}}]);