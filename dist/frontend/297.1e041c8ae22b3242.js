"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[297],{5297:(L,m,i)=>{i.r(m),i.d(m,{AdministracionModule:()=>F});var E=i(6814),d=i(1896),t=i(5879),D=i(6385),u=i(4104);let v=(()=>{class a{constructor(o){this.router=o,this.activeTabIndex=0;const e=localStorage.getItem("activeAdministracion");null!==e&&(this.activeTabIndex=+e)}onTabChange(o){switch(this.activeTabIndex=o.index,localStorage.setItem("activeAdministracion",this.activeTabIndex.toString()),o.index){case 0:this.router.navigateByUrl("/servicios/administracion/directiva");break;case 1:this.router.navigateByUrl("/servicios/administracion/bienes")}}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-principal"]],decls:6,vars:1,consts:[["mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedIndex","selectedTabChange"],["label","ADMINISTRACI\xd3N DE DIRECTIVA"],["label","ADMINISTRACI\xd3N DE BIENES"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedTabChange",function(l){return n.onTabChange(l)}),t._UZ(1,"mat-tab",1)(2,"mat-tab",2),t.qZA(),t._UZ(3,"mat-divider"),t.TgZ(4,"body"),t._UZ(5,"router-outlet"),t.qZA()),2&e&&t.Q6J("selectedIndex",n.activeTabIndex)},dependencies:[d.lC,D.d,u.uX,u.SP]})}return a})();var r=i(6223),p=i(9413),c=i(7700),O=i(9862);let g=(()=>{class a{constructor(o){this.http=o,this.myAppUrl=p.N.endpoint,this.myApyUrl="api/detalledirectivas/",this.phpUrl="http://localhost:8085/servicio/buscar.php"}getAdministracion(){return this.http.get(this.myAppUrl+this.myApyUrl)}getAdministracionPhp(){return this.http.get(this.phpUrl)}postAdministracion(o){return this.http.post(`${this.myAppUrl}${this.myApyUrl}`,o)}deleteAdminstracion(o){return this.http.delete(this.myAppUrl+this.myApyUrl+o)}static#t=this.\u0275fac=function(e){return new(e||a)(t.LFG(O.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var h=i(3814),T=i(617),R=i(2032),f=i(9157),A=i(2296),S=i(1274),N=i(8525),U=i(3680);let C=(()=>{class a{constructor(o,e,n){this.formBuilder=o,this.dialogRef=e,this._servicio=n,this.form=this.formBuilder.group({ID_DIR_DET:["1",[r.kI.required]],CED_USU_DIR:["",r.kI.required],CARGO:["",r.kI.required],CONTRASENA:["",[r.kI.required]],OBSERVACIONES:["",[r.kI.required]]})}addEditDirectiva(){if(this.form.valid){const o=this.form.value,e={ID_DIR_DET:o.ID_DIR_DET,CED_USU_DIR:o.CED_USU_DIR,A\u00d1O_ING:(new Date).toISOString().slice(0,10),CARGO:o.CARGO,CONTRASENA:o.CONTRASENA,ESTADO:"Activo",OBSERVACIONES:o.OBSERVACIONES};this._servicio.postAdministracion(e).subscribe(n=>{this.cancelar(),this.dialogRef.close(!0)},n=>{console.error("Error al agregar la directiva:",n)})}else console.log("Formulario inv\xe1lido, por favor revisa los campos.")}cancelar(){this.dialogRef.close()}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(r.qu),t.Y36(c.so),t.Y36(g))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-ingresar-editar-directiva"]],decls:49,vars:2,consts:[[1,"formulario",3,"formGroup","ngSubmit"],["fxLayout","","fxLayoutAlign","space-between center"],["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close",""],[1,"mat-typography"],[1,"row"],[1,"columna"],["appearance","outline"],["formControlName","ID_DIR_DET","matInput","","placeholder","Ingrese el ID","autocomplete","off",3,"readonly"],["formControlName","CED_USU_DIR","matInput","","placeholder","Ingrese la cedula","autocomplete","off"],["formControlName","CARGO","placeholder","Seleccione el cargo"],["value","LECTOR"],["value","ADMINISTRADOR"],["value","SECRETARIO"],["value","TESORERO"],["formControlName","CONTRASENA","type","password","matInput","","placeholder","Ingrese Contrase\xf1a","autocomplete","off"],["formControlName","OBSERVACIONES","matInput","","placeholder","Ingrese Observaciones","autocomplete","off"],["align","end"],["type","button","mat-button","",3,"click"],["type","submit","mat-button","","cdkFocusInitial",""]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.addEditDirectiva()}),t.TgZ(1,"mat-toolbar",1)(2,"h3",2),t._uU(3," Agregar Directiva"),t.qZA(),t.TgZ(4,"button",3)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",4)(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"ID"),t.qZA(),t._UZ(13,"input",8),t.qZA()(),t.TgZ(14,"div",6)(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Cedula"),t.qZA(),t._UZ(18,"input",9),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),t._uU(23,"Cargo"),t.qZA(),t.TgZ(24,"mat-select",10)(25,"mat-option",11),t._uU(26,"LECTOR"),t.qZA(),t.TgZ(27,"mat-option",12),t._uU(28,"ADMINISTRADOR"),t.qZA(),t.TgZ(29,"mat-option",13),t._uU(30,"SECRETARIO"),t.qZA(),t.TgZ(31,"mat-option",14),t._uU(32,"TESORERO"),t.qZA()()()(),t.TgZ(33,"div",6)(34,"mat-form-field",7)(35,"mat-label"),t._uU(36,"Contrase\xf1a"),t.qZA(),t._UZ(37,"input",15),t.qZA()()(),t.TgZ(38,"div",5)(39,"div",6)(40,"mat-form-field",7)(41,"mat-label"),t._uU(42,"Observaciones"),t.qZA(),t._UZ(43,"input",16),t.qZA()()()(),t.TgZ(44,"mat-dialog-actions",17)(45,"button",18),t.NdJ("click",function(){return n.cancelar()}),t._uU(46,"Cancelar"),t.qZA(),t.TgZ(47,"button",19),t._uU(48,"Aceptar"),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(13),t.Q6J("readonly",!0))},dependencies:[h.xw,h.Wh,T.Hw,R.Nt,f.KE,f.hX,A.lW,A.RK,r._Y,r.Fj,r.JJ,r.JL,S.Ye,c.ZT,c.uh,c.xY,c.H8,N.gD,U.ey,r.sg,r.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{display:flex}.columna[_ngcontent-%COMP%]{flex:50%;margin:0 5px 20px 0}.error[_ngcontent-%COMP%]{color:brown;margin-top:-20px}span[_ngcontent-%COMP%]{font-size:13px}"]})}return a})();var I=i(3577),b=i(7935),Z=i(494),y=i(4059),B=i(6724),x=i(2823);const P=[{path:"",component:v,children:[{path:"",redirectTo:"directiva",pathMatch:"full"},{path:"directiva",component:(()=>{class a{constructor(o,e,n){this.fb=o,this._adminService=e,this.dialog=n,this.records=[],this.data=[],this.metaDataColumns=[{field:"CED_USU_DIR",title:"CEDULA"},{field:"A\xd1O_ING",title:"A\xd1O INGRESO"},{field:"CARGO",title:"CARGO"},{field:"ESTADO",title:"ESTADO"},{field:"OBSERVACIONES",title:"OBSERVACION"},{field:"acciones",title:"ACCIONES"}],this.keypadButtons=[{icon:"cloud_download",tooltip:"EXPORTAR",color:"accent",action:"DOWNLOAD"},{icon:"person_add",tooltip:"AGREGAR",color:"primary",action:"NEW"}],this.totalRecords=this.records.length,this.formulario=this.fb.group({CED_USU_DIR:["1",r.kI.required],DOCUMENTO:[null,r.kI.required],OBSERVACION:[null,r.kI.maxLength(50)]}),this.cargarDatos(),this.changePage(0)}ngOnInit(){}onFileSelected(o){const e=o.target.files[0];e&&this.formulario.patchValue({DOCUMENTO:e})}cargarDatos(){this._adminService.getAdministracionPhp().subscribe(o=>{this.records=o.map(e=>({ID_DET_DIR:e.ID_DET_DIR,CED_USU_DIR:e.CED_USU_DIR,A\u00d1O_ING:e.A\u00d1O_ING,CARGO:e.CARGO,ESTADO:e.ESTADO,OBSERVACIONES:e.OBSERVACIONES,acciones:[{icon:"edit",tooltip:"Editar ",color:"primary"},{icon:"delete",tooltip:"Eliminar ",color:"warn"}]})),this.totalRecords=this.records.length,this.changePage(0)})}guardar(){this._adminService.postAdministracion({ID_SESION_ACT:this.formulario.value.ID_SESION_ACT,DOCUMENTO:this.formulario.value.DOCUMENTO,OBSERVACION:this.formulario.value.OBSERVACION}).subscribe(e=>{console.log("Datos insertados con \xe9xito"),this.cargarDatos()},e=>{console.error("Error al insertar datos:",e)})}ejecutarAccion(o,e){"edit"===o.icon?(console.log("Editando fila:",e),this.dialog.open(C,{width:"600px",data:{cedula:e.CED_USU,lecActual:e.LEC_ACT,lecAnterior:e.LEC_ANT,metodo:this.cargarDatos()}}).afterClosed().subscribe(s=>{s&&(console.log("Hola:",s),this.cargarDatos())})):"delete"===o.icon&&(console.log("Eliminando fila:",e),window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta fila?")&&this._adminService.deleteAdminstracion(e.ID_DET_DIR).subscribe(s=>{console.log("ELIMINADO \xe9xito"),this.cargarDatos()},s=>{console.error("Error al insertar ELIMNAR:",s)}))}openAddEditDialog(){this.dialog.open(C,{width:"700px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.cargarDatos()})}changePage(o){const e=p.N.PAGE_SIZE,n=e*o;this.data=this.records.slice(n,n+e)}doAction(o){switch(o){case"DOWNLOAD":break;case"NEW":this.openAddEditDialog()}}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(r.qu),t.Y36(g),t.Y36(c.uw))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-directiva"]],decls:6,vars:4,consts:[[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[3,"keypadButtons","onClick"]],template:function(e,n){1&e&&(t._UZ(0,"gst-spiner"),t.TgZ(1,"gst-container")(2,"ng-scrollbar",0)(3,"gst-table",1),t.NdJ("actionClicked",function(l){return n.ejecutarAccion(l.accion,l.rowData)}),t.qZA()(),t.TgZ(4,"gst-paginator",2),t.NdJ("onChangePage",function(l){return n.changePage(l)}),t.qZA()(),t.TgZ(5,"gst-keypad-button",3),t.NdJ("onClick",function(l){return n.doAction(l)}),t.qZA()),2&e&&(t.xp6(3),t.Q6J("data",n.data)("metaDataColumns",n.metaDataColumns),t.xp6(1),t.Q6J("length",n.totalRecords),t.xp6(1),t.Q6J("keypadButtons",n.keypadButtons))},dependencies:[I.e,b.a,Z.J,y.o,B.O,x.KC]})}return a})()},{path:"bienes",component:(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-bienes"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"gst-container")},dependencies:[I.e]})}return a})()}]}];let M=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(P),d.Bz]})}return a})();var G=i(3223),J=i(568);let F=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[E.ez,M,G.Y,J.m]})}return a})()}}]);