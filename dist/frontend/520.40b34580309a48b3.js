"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[520],{8520:(j,A,s)=>{s.r(A),s.d(A,{SesionesModule:()=>V});var d=s(6814),u=s(1896),t=s(5879),C=s(2296),g=s(7988),O=s(6385),h=s(4104);function v(a,m){if(1&a&&(t.TgZ(0,"button",8),t._uU(1," ASISTENCIAS "),t.qZA()),2&a){t.oxw();const n=t.MAs(7);t.Q6J("matMenuTriggerFor",n)}}let I=(()=>{class a{constructor(n){this.router=n,this.activeTabIndex=0;const e=localStorage.getItem("activeSesiones");null!==e&&(this.activeTabIndex=+e)}onTabChange(n){switch(this.activeTabIndex=n,localStorage.setItem("activeSesiones",this.activeTabIndex.toString()),n){case 0:this.router.navigateByUrl("/servicios/sesiones/sesiones");break;case 1:this.router.navigateByUrl("/servicios/sesiones/actas");break;case 2:this.router.navigateByUrl("/servicios/sesiones/mingas")}}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-page-princial-sesiones"]],decls:15,vars:0,consts:[["mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedIndexChange"],["label","SESIONES"],["label","ACTAS"],["label","MINGAS"],["mat-tab-label",""],["asistenciasMenu","matMenu"],["mat-menu-item",""],["label","MULTAS"],["mat-button","",2,"color","#646262",3,"matMenuTriggerFor"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedIndexChange",function(r){return o.onTabChange(r)}),t._UZ(1,"mat-tab",1)(2,"mat-tab",2)(3,"mat-tab",3),t.TgZ(4,"mat-tab"),t.YNc(5,v,2,1,"ng-template",4),t.TgZ(6,"mat-menu",null,5)(8,"button",6),t._uU(9,"MINGAS"),t.qZA(),t.TgZ(10,"button",6),t._uU(11,"SESIONES"),t.qZA()()(),t._UZ(12,"mat-tab",7),t.qZA(),t._UZ(13,"mat-divider")(14,"router-outlet"))},dependencies:[u.lC,C.lW,g.VK,g.OP,g.p6,O.d,h.uD,h.uX,h.SP]})}return a})();var c=s(6223),E=s(7624),T=s(9413),b=s(9862);let N=(()=>{class a{constructor(n){this.http=n,this.myAppUrl=T.N.endpoint,this.myApyUrl="api/actas/"}getActas(){return this.http.get(this.myAppUrl+this.myApyUrl)}postActas(n){return this.http.post(`${this.myAppUrl}${this.myApyUrl}`,n)}deleteActas(n){return this.http.delete(this.myAppUrl+this.myApyUrl+n)}static#t=this.\u0275fac=function(e){return new(e||a)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var U=s(7700),x=s(2939),y=s(3577),Z=s(7935),_=s(494),f=s(3814),D=s(2032),S=s(9157),p=s(5195),M=s(2823);function F(a,m){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const n=t.oxw();let e;t.xp6(1),t.Oqu(null==(e=n.formulario.get("DOCUMENTO"))?null:e.value.name)}}function J(a,m){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const n=t.oxw().$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[n.key]," ")}}function B(a,m){if(1&a&&(t.TgZ(0,"a",17),t._uU(1,"Descargar/Ver"),t.qZA()),2&a){const n=t.oxw().$implicit,e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("href",o.obtenerEnlaceDescarga(e[n.key]),t.LSH)}}function R(a,m){if(1&a&&(t.TgZ(0,"td"),t.YNc(1,J,2,1,"ng-container",15),t.YNc(2,B,2,1,"ng-template",null,16,t.W1O),t.qZA()),2&a){const n=m.$implicit,e=t.MAs(3);t.xp6(1),t.Q6J("ngIf","DOCUMENTO"!==n.key)("ngIfElse",e)}}function P(a,m){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,R,4,2,"td",14),t.qZA()),2&a){const n=t.oxw().columns;t.xp6(1),t.Q6J("ngForOf",n)}}function L(a,m){if(1&a&&t.YNc(0,P,2,1,"tr",14),2&a){const n=t.oxw();t.Q6J("ngForOf",n.data)}}const Y=[{path:"",component:I,children:[{path:"",redirectTo:"sesiones",pathMatch:"full"},{path:"actas",component:(()=>{class a{constructor(n,e,o,i,r){this.renderer=n,this.fb=e,this._actasService=o,this.dialog=i,this.snackBar=r,this.records=[],this.links={},this.data=[],this.metaDataColumns=[{field:"ID_ACT",title:"ID"},{field:"DOCUMENTO",title:"DOCUMENTO"},{field:"OBSERVACION",title:"OBSERVACION"},{field:"acciones",title:"ACCIONES"}],this.totalRecords=this.records.length,this.formulario=this.fb.group({ID_SESION_ACT:["1",c.kI.required],DOCUMENTO:[null,c.kI.required],OBSERVACION:[null,c.kI.maxLength(50)]}),this.cargarDatos(),this.changePage(0)}ngOnInit(){}onFileSelected(n){const e=n.target.files[0];e&&this.formulario.patchValue({DOCUMENTO:e})}cargarDatos(){this._actasService.getActas().subscribe(n=>{this.records=n.map(e=>{const o=new Blob([new Uint8Array(e.DOCUMENTO.data)],{type:"application/pdf"}),i=URL.createObjectURL(o),r=`link_${e.ID_ACT}`;return this.links[r]=i,{ID_ACT:e.ID_ACT,DOCUMENTO:r,OBSERVACION:e.OBSERVACION,acciones:[{icon:"edit",tooltip:"Editar Acta",color:"primary"},{icon:"delete",tooltip:"Eliminar Acta",color:"warn"}]}}),this.totalRecords=this.records.length,this.changePage(0)})}obtenerEnlaceDescarga(n){return this.links[n]||""}generarURLDescarga(n){const e=new Blob([new Uint8Array(n.data)],{type:"application/pdf"});return URL.createObjectURL(e)}generarEnlaceDescarga(n){return`<a href="${n}" download="documento.pdf">Descargar/Ver</a>`}guardar(){this._actasService.postActas({ID_SESION_ACT:this.formulario.value.ID_SESION_ACT,DOCUMENTO:this.formulario.value.DOCUMENTO,OBSERVACION:this.formulario.value.OBSERVACION}).subscribe(e=>{this.showMessage("Datos insertados con \xe9xito"),this.cargarDatos()},e=>{console.error("Error al insertar datos:",e)})}ejecutarAccion(n,e){"edit"===n.icon?(console.log("Editando fila:",e),this.dialog.open(E.L,{width:"700px",data:{cedula:e.CED_USU,lecActual:e.LEC_ACT,lecAnterior:e.LEC_ANT,metodo:this.cargarDatos()}}).afterClosed().subscribe(i=>{i&&(this.cargarDatos(),this.showMessage("Editado con \xe9xito"))})):"delete"===n.icon&&(console.log("Eliminando fila:",e),window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta fila?")&&this._actasService.deleteActas(e.ID_ACT).subscribe(i=>{this.showMessage("Eliminado con \xe9xito"),this.cargarDatos()},i=>{console.error("Error al insertar ELIMNAR:",i)}))}changePage(n){const e=T.N.PAGE_SIZE,o=e*n;this.data=this.records.slice(o,o+e)}showMessage(n,e=5e3){this.snackBar.open(n,"",{duration:e})}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(t.Qsj),t.Y36(c.qu),t.Y36(N),t.Y36(U.uw),t.Y36(x.ux))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-actas"]],decls:27,vars:7,consts:[["fxLayout","row","fxLayoutGap","14px",3,"formGroup"],["appearance","outline","fxFlex","15%"],["matInput","","formControlName","ID_SESION_ACT",3,"readonly"],["fxFlex","30%"],["type","file","accept",".pdf",2,"display","none",3,"change"],["fileInput",""],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["appearance","outline","fxFlex","25%"],["matInput","","formControlName","OBSERVACION"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["linkColumn",""],["download","documento.pdf",3,"href"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"gst-container")(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Agregar Actas"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"form",0)(7,"mat-form-field",1)(8,"mat-label"),t._uU(9,"ID Sesi\xf3n Act"),t.qZA(),t._UZ(10,"input",2),t.qZA(),t.TgZ(11,"div",3)(12,"input",4,5),t.NdJ("change",function(l){return o.onFileSelected(l)}),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(13);return t.KtG(l.click())}),t._uU(15," Seleccionar Archivo "),t.qZA(),t.YNc(16,F,2,1,"span",7),t.qZA(),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"Observaci\xf3n"),t.qZA(),t._UZ(20,"input",9),t.qZA(),t.TgZ(21,"button",10),t.NdJ("click",function(){return o.guardar()}),t._uU(22," Guardar "),t.qZA()()()(),t.TgZ(23,"ng-scrollbar",11)(24,"gst-table",12),t.NdJ("actionClicked",function(l){return o.ejecutarAccion(l.accion,l.rowData)}),t.YNc(25,L,1,1,"ng-template"),t.qZA()(),t.TgZ(26,"gst-paginator",13),t.NdJ("onChangePage",function(l){return o.changePage(l)}),t.qZA()()}if(2&e){let i;t.xp6(6),t.Q6J("formGroup",o.formulario),t.xp6(4),t.Q6J("readonly",!0),t.xp6(6),t.Q6J("ngIf",(null==(i=o.formulario.get("DOCUMENTO"))?null:i.value)&&(null==(i=o.formulario.get("DOCUMENTO"))?null:i.value.name)),t.xp6(5),t.Q6J("disabled",!o.formulario.valid),t.xp6(3),t.Q6J("data",o.data)("metaDataColumns",o.metaDataColumns),t.xp6(2),t.Q6J("length",o.totalRecords)}},dependencies:[d.sg,d.O5,y.e,Z.a,_.J,f.xw,f.SQ,f.yH,D.Nt,S.KE,S.hX,C.lW,c._Y,c.Fj,c.JJ,c.JL,p.a8,p.dn,p.dk,p.n5,c.sg,c.u,M.KC],styles:["mat-card[_ngcontent-%COMP%]{border:2px solid #000000;border-radius:12px}"]})}return a})()},{path:"mingas",component:(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-mingas"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"mingas works!"),t.qZA())}})}return a})()},{path:"sesiones",component:(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["gst-sesiones"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"sesiones works!"),t.qZA())}})}return a})()}]}];let k=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(Y),u.Bz]})}return a})();var Q=s(3223),w=s(568);let V=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[d.ez,k,Q.Y,w.m]})}return a})()}}]);