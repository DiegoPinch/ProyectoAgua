"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[612],{5612:(Ja,ae,l)=>{l.r(ae),l.d(ae,{LecturasModule:()=>Wa});var Y=l(6814),Z=l(1896),o=l(5879),_=l(3814),re=l(617),G=l(2296),ne=l(1274);let _e=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-page-lecturas"]],decls:12,vars:0,consts:[[1,"custom-toolbar"],["fxLayout","row","fxLayoutGap","10px"],["mat-raised-button","","color","accent","routerLink","ingresar",1,"custom-button"],["mat-raised-button","","color","accent","routerLink","editar",1,"custom-button"]],template:function(t,r){1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),o._uU(4,"add"),o.qZA(),o._uU(5," Ingresar Lecturas "),o.qZA(),o.TgZ(6,"button",3)(7,"mat-icon"),o._uU(8,"edit"),o.qZA(),o._uU(9," Editar Lecturas "),o.qZA()()(),o.TgZ(10,"body"),o._UZ(11,"router-outlet"),o.qZA())},dependencies:[Z.lC,Z.rH,_.xw,_.SQ,re.Hw,G.lW,ne.Ye],styles:[".edit-icon[_ngcontent-%COMP%]{color:green}.delete-icon[_ngcontent-%COMP%]{color:red}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 4px 2px -2px #0003;background-color:#c5cae9}.custom-button[_ngcontent-%COMP%]{font-size:16px}"]})}return n})();var oe=l(9413),g=l(6223),P=l(7700),Ee=l(6097),$=l(2948),Oe=l(6185),De=l(2939),X=l(2032),I=l(9157);function Se(n,a){1&n&&(o.TgZ(0,"span"),o._uU(1," Es una lectura "),o.TgZ(2,"strong"),o._uU(3,"incorrecta"),o.qZA()())}let Pe=(()=>{class n{constructor(e,t,r,i,s,u,m){this._medidoresService=e,this._facturas=t,this.dialogRef=r,this.dialog=i,this.fb=s,this.data=u,this.snackBar=m,this.estado="",this.lecturaForm=this.fb.group({CED_USU:["",g.kI.required],NOMBRES:["",g.kI.required],TIP_MED:["",g.kI.required],LEC_ANT:["",g.kI.required],LEC_ACT:["",[g.kI.required,this.verificarLecturaIngreso.bind(this)]],MES_CON:["",g.kI.required]})}ngOnInit(){this.data&&this.data.rowData.CED_USU&&this._medidoresService.getLecturaActual(this.data.rowData.CED_USU,this.data.selectedTipo,this.data.selectedMesResta).subscribe(e=>{if(Array.isArray(e)&&e.length>0){const t=e[0];this.estado=t.MES_CON,void 0!==t.LEC_ACT&&this.setearDatos(t.LEC_ACT)}else this.obtenerUltimaLectura(this.data.rowData.ID_MED)},e=>{console.error("Error al cargar datos:",e)})}obtenerUltimaLectura(e){this._medidoresService.getultimaLecturaInsertada(e).subscribe(t=>{if(t&&t.length>0){const r=t[0];this.estado=r.MES_CON,this.setearDatos(r.LEC_ACT)}else this.obtenerLecturaInsert(e)},t=>{console.error("Error al obtener los datos:",t)})}obtenerLecturaInsert(e){this._medidoresService.getLecturaIngresoMedidor(e).subscribe(t=>{t&&t.length>0&&(this.estado="NUEVO MEDIDOR",this.setearDatos(t[0].LEC_ING))},t=>{console.error("Error al obtener los datos:",t)})}setearDatos(e){this.lecturaForm.patchValue({CED_USU:this.data.rowData.CED_USU,TIP_MED:this.data.selectedTipo,MES_CON:this.data.selectedMes,LEC_ANT:e,NOMBRES:this.data.rowData.APE_USU+" "+this.data.rowData.NOM_USU})}verificarLecturaExis(){this._medidoresService.verificarLecturaExistente(this.data.selectedMes,this.data.rowData.ID_MED).subscribe(e=>{e&&e.length>0?this.mensajeError("Medidor con lectura existente en el mes seleccionado"):this.guardarLectura()},e=>{console.error("Error al verificar la lectura existente:",e)})}mensajeError(e){this.dialog.open(Ee.P,{data:{title:"Aviso",message:e}})}guardarLectura(){if(this.lecturaForm.valid){const e=this.lecturaForm.get("LEC_ANT")?.value,t=this.lecturaForm.get("LEC_ACT")?.value;if(!this.esLecturaValida(e,t))return void this.mensajeError("La lectura Actual debe ser mayor a la Lectura Anterior");const r=t-e,{exceso:i,total:s}=this.calcularExcesoYTotal(r);this._medidoresService.postLecturas(e,t,"2023-11-02",this.data.selectedMes,this.data.rowData.ID_MED).subscribe(f=>{const h=f.ID_LEC;this.cerrarModal(),this.showMessage("Lectura insertada correctamente... "),this.generarFactura(i,s,h)},f=>{console.error("Error al insertar datos:",f)})}}calcularExcesoYTotal(e){let t=0,r=0;return"CONSUMO"===this.data.selectedTipo?e>=10?(t=e-10,r=1.5+.28*t):r=1.5:"RIEGO"===this.data.selectedTipo&&(e>=20?(t=e-20,r=5.5+.28*t):r=5.5),{exceso:t,total:+r.toFixed(2)}}generarFactura(e,t,r){this._facturas.postFacturas({FEC_PAGO:null,FEC_GENE:null,EST_FACT:"PENDIENTE",EXC_LECTURA:e,SUM_TOTAL:t,ID_LEC_PER:r}).subscribe(s=>{},s=>{console.error("Error al crear Factura:",s)})}cerrarModal(){this.dialogRef.close()}showMessage(e,t=5e3){this.snackBar.open(e,"",{duration:t})}verificarLecturaIngreso(e){if(!e.dirty||!e.value)return null;const t=parseFloat(this.lecturaForm.get("LEC_ANT")?.value);return parseFloat(e.value)>=t?null:{lecturaInvalida:!0}}esLecturaValida(e,t){return t>=e}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36($.I),o.Y36(Oe.m),o.Y36(P.so),o.Y36(P.uw),o.Y36(g.qu),o.Y36(P.WI),o.Y36(De.ux))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-ingresar-editar"]],decls:46,vars:4,consts:[["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],["fxLayout","column",3,"formGroup"],["fxLayout","row","fxLayoutGap","24px"],["appearance","outline"],["formControlName","CED_USU","matInput","","autocomplete","off"],["formControlName","NOMBRES","matInput","","autocomplete","off"],["formControlName","TIP_MED","matInput","","autocomplete","off"],["formControlName","MES_CON","matInput","","autocomplete","off"],["formControlName","LEC_ANT","matInput","","autocomplete","off"],["formControlName","LEC_ACT","matInput","","type","number","placeholder","Ingrese Lectura Actual","autocomplete","off"],[1,"error"],[4,"ngIf"],["fxLayout","","fxLayoutAlign","end","fxLayoutGap","10px"],["mat-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"]],template:function(t,r){if(1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"h3"),o._uU(2,"Ingresar Lectura"),o.qZA(),o.TgZ(3,"button",1)(4,"mat-icon"),o._uU(5,"close"),o.qZA()()(),o.TgZ(6,"mat-dialog-content")(7,"form",2)(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),o._uU(11," C\xe9dula "),o.qZA(),o._UZ(12,"input",5),o.qZA(),o.TgZ(13,"mat-form-field",4)(14,"mat-label"),o._uU(15," Nombres "),o.qZA(),o._UZ(16,"input",6),o.qZA()(),o.TgZ(17,"div",3)(18,"mat-form-field",4)(19,"mat-label"),o._uU(20," Tipo "),o.qZA(),o._UZ(21,"input",7),o.qZA(),o.TgZ(22,"mat-form-field",4)(23,"mat-label"),o._uU(24,"Mes Actual"),o.qZA(),o._UZ(25,"input",8),o.qZA()(),o.TgZ(26,"div",3)(27,"div")(28,"mat-form-field",4)(29,"mat-label"),o._uU(30," Lectura Anterior "),o.qZA(),o._UZ(31,"input",9),o.TgZ(32,"span"),o._uU(33),o.qZA()()(),o.TgZ(34,"div")(35,"mat-form-field",4)(36,"mat-label"),o._uU(37,"Lectura Actual"),o.qZA(),o._UZ(38,"input",10),o.qZA(),o.TgZ(39,"div",11),o.YNc(40,Se,4,0,"span",12),o.qZA()()(),o.TgZ(41,"div",13)(42,"button",14),o.NdJ("click",function(){return r.cerrarModal()}),o._uU(43,"Cancelar"),o.qZA(),o.TgZ(44,"button",15),o.NdJ("click",function(){return r.verificarLecturaExis()}),o._uU(45," Guardar"),o.qZA()()()()),2&t){let i;o.xp6(7),o.Q6J("formGroup",r.lecturaForm),o.xp6(26),o.Oqu(r.estado),o.xp6(7),o.Q6J("ngIf",null==(i=r.lecturaForm.get("LEC_ACT"))?null:i.hasError("lecturaInvalida")),o.xp6(4),o.Q6J("disabled",r.lecturaForm.invalid)}},dependencies:[Y.O5,_.xw,_.SQ,_.Wh,re.Hw,X.Nt,I.KE,I.hX,G.lW,G.RK,g._Y,g.Fj,g.wV,g.JJ,g.JL,ne.Ye,P.ZT,P.xY,g.sg,g.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:45vh}.error[_ngcontent-%COMP%]{color:brown;margin-top:-20px}"]})}return n})();var Ue={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}};function N(n){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=a.width?String(a.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Re={date:N({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:N({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:N({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ke={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Ye={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"};function y(n){return function(a,e){var r;if("formatting"===(null!=e&&e.context?String(e.context):"standalone")&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,s=null!=e&&e.width?String(e.width):i;r=n.formattingValues[s]||n.formattingValues[i]}else{var u=n.defaultWidth,m=null!=e&&e.width?String(e.width):n.defaultWidth;r=n.values[m]||n.values[u]}return r[n.argumentCallback?n.argumentCallback(a):a]}}function ie(n){return function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.match(n.matchPattern);if(!t)return null;var r=t[0],i=a.match(n.parsePattern);if(!i)return null;var s=n.valueCallback?n.valueCallback(i[0]):i[0];return{value:s=e.valueCallback?e.valueCallback(s):s,rest:a.slice(r.length)}}}function T(n){return function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.width,i=a.match(t&&n.matchPatterns[t]||n.matchPatterns[n.defaultMatchWidth]);if(!i)return null;var d,s=i[0],u=t&&n.parsePatterns[t]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(u)?function ze(n,a){for(var e=0;e<n.length;e++)if(a(n[e]))return e}(u,function(h){return h.test(s)}):function Ve(n,a){for(var e in n)if(n.hasOwnProperty(e)&&a(n[e]))return e}(u,function(h){return h.test(s)});return d=n.valueCallback?n.valueCallback(m):m,{value:d=e.valueCallback?e.valueCallback(d):d,rest:a.slice(s.length)}}}const ht={code:"es",formatDistance:function(a,e,t){var r,i=Ue[a];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"en "+r:"hace "+r:r},formatLong:Re,formatRelative:function(a,e,t,r){return 1!==e.getUTCHours()?Ye[a]:ke[a]},localize:{ordinalNumber:function(a,e){return Number(a)+"\xba"},era:y({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:y({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(a){return Number(a)-1}}),month:y({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:y({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:y({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ie({matchPattern:/^(\d+)(\xba)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}}),era:T({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u\xfa]n|despu[e\xe9]s de cristo|era com[u\xfa]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u\xfa]n)/i,/^(despu[e\xe9]s de cristo|era com[u\xfa]n)/i]},defaultParseWidth:"any"}),quarter:T({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](\xba)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:T({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:T({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[\xe1a])/i,abbreviated:/^(dom|lun|mar|mi[\xe9e]|jue|vie|s[\xe1a]b)/i,wide:/^(domingo|lunes|martes|mi[\xe9e]rcoles|jueves|viernes|s[\xe1a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (ma\xf1ana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (ma\xf1ana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/ma\xf1ana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function E(n){if(null===n||!0===n||!1===n)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}function F(n){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function v(n,a){if(a.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+a.length+" present")}function C(n){v(1,arguments);var a=Object.prototype.toString.call(n);return n instanceof Date||"object"===F(n)&&"[object Date]"===a?new Date(n.getTime()):"number"==typeof n||"[object Number]"===a?new Date(n):(("string"==typeof n||"[object String]"===a)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function q(n){v(1,arguments);var e=C(n),t=e.getUTCDay(),r=(t<1?7:0)+t-1;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function se(n){v(1,arguments);var a=C(n),e=a.getUTCFullYear(),t=new Date(0);t.setUTCFullYear(e+1,0,4),t.setUTCHours(0,0,0,0);var r=q(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var s=q(i);return a.getTime()>=r.getTime()?e+1:a.getTime()>=s.getTime()?e:e-1}var le={};function J(){return le}function B(n,a){var e,t,r,i,s,u,m,d;v(1,arguments);var f=J(),h=E(null!==(e=null!==(t=null!==(r=null!==(i=a?.weekStartsOn)&&void 0!==i?i:null==a||null===(s=a.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:f.weekStartsOn)&&void 0!==t?t:null===(m=f.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==e?e:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=C(n),p=b.getUTCDay(),M=(p<h?7:0)+p-h;return b.setUTCDate(b.getUTCDate()-M),b.setUTCHours(0,0,0,0),b}function ue(n,a){var e,t,r,i,s,u,m,d;v(1,arguments);var f=C(n),h=f.getUTCFullYear(),b=J(),p=E(null!==(e=null!==(t=null!==(r=null!==(i=a?.firstWeekContainsDate)&&void 0!==i?i:null==a||null===(s=a.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==r?r:b.firstWeekContainsDate)&&void 0!==t?t:null===(m=b.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=new Date(0);M.setUTCFullYear(h+1,0,p),M.setUTCHours(0,0,0,0);var x=B(M,a),A=new Date(0);A.setUTCFullYear(h,0,p),A.setUTCHours(0,0,0,0);var R=B(A,a);return f.getTime()>=x.getTime()?h+1:f.getTime()>=R.getTime()?h:h-1}function c(n,a){for(var e=n<0?"-":"",t=Math.abs(n).toString();t.length<a;)t="0"+t;return e+t}const O_y=function(a,e){var t=a.getUTCFullYear(),r=t>0?t:1-t;return c("yy"===e?r%100:r,e.length)},O_M=function(a,e){var t=a.getUTCMonth();return"M"===e?String(t+1):c(t+1,2)},O_d=function(a,e){return c(a.getUTCDate(),e.length)},O_h=function(a,e){return c(a.getUTCHours()%12||12,e.length)},O_H=function(a,e){return c(a.getUTCHours(),e.length)},O_m=function(a,e){return c(a.getUTCMinutes(),e.length)},O_s=function(a,e){return c(a.getUTCSeconds(),e.length)},O_S=function(a,e){var t=e.length,r=a.getUTCMilliseconds();return c(Math.floor(r*Math.pow(10,t-3)),e.length)};function ce(n,a){var e=n>0?"-":"+",t=Math.abs(n),r=Math.floor(t/60),i=t%60;if(0===i)return e+String(r);var s=a||"";return e+String(r)+s+c(i,2)}function de(n,a){return n%60==0?(n>0?"-":"+")+c(Math.abs(n)/60,2):U(n,a)}function U(n,a){var e=a||"",t=n>0?"-":"+",r=Math.abs(n);return t+c(Math.floor(r/60),2)+e+c(r%60,2)}const Ut={G:function(a,e,t){var r=a.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});default:return t.era(r,{width:"wide"})}},y:function(a,e,t){if("yo"===e){var r=a.getUTCFullYear();return t.ordinalNumber(r>0?r:1-r,{unit:"year"})}return O_y(a,e)},Y:function(a,e,t,r){var i=ue(a,r),s=i>0?i:1-i;return"YY"===e?c(s%100,2):"Yo"===e?t.ordinalNumber(s,{unit:"year"}):c(s,e.length)},R:function(a,e){return c(se(a),e.length)},u:function(a,e){return c(a.getUTCFullYear(),e.length)},Q:function(a,e,t){var r=Math.ceil((a.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return c(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(a,e,t){var r=Math.ceil((a.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return c(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(a,e,t){var r=a.getUTCMonth();switch(e){case"M":case"MM":return O_M(a,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(a,e,t){var r=a.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return c(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(a,e,t,r){var i=function Dt(n,a){v(1,arguments);var e=C(n),t=B(e,a).getTime()-function Et(n,a){var e,t,r,i,s,u,m,d;v(1,arguments);var f=J(),h=E(null!==(e=null!==(t=null!==(r=null!==(i=a?.firstWeekContainsDate)&&void 0!==i?i:null==a||null===(s=a.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==r?r:f.firstWeekContainsDate)&&void 0!==t?t:null===(m=f.locale)||void 0===m||null===(d=m.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1),b=ue(n,a),p=new Date(0);return p.setUTCFullYear(b,0,h),p.setUTCHours(0,0,0,0),B(p,a)}(e,a).getTime();return Math.round(t/6048e5)+1}(a,r);return"wo"===e?t.ordinalNumber(i,{unit:"week"}):c(i,e.length)},I:function(a,e,t){var r=function _t(n){v(1,arguments);var a=C(n),e=q(a).getTime()-function yt(n){v(1,arguments);var a=se(n),e=new Date(0);return e.setUTCFullYear(a,0,4),e.setUTCHours(0,0,0,0),q(e)}(a).getTime();return Math.round(e/6048e5)+1}(a);return"Io"===e?t.ordinalNumber(r,{unit:"week"}):c(r,e.length)},d:function(a,e,t){return"do"===e?t.ordinalNumber(a.getUTCDate(),{unit:"date"}):O_d(a,e)},D:function(a,e,t){var r=function Mt(n){v(1,arguments);var a=C(n),e=a.getTime();a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0);var t=a.getTime();return Math.floor((e-t)/864e5)+1}(a);return"Do"===e?t.ordinalNumber(r,{unit:"dayOfYear"}):c(r,e.length)},E:function(a,e,t){var r=a.getUTCDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(a,e,t,r){var i=a.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return c(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(a,e,t,r){var i=a.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return c(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(a,e,t){var r=a.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return c(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(a,e,t){var i=a.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(a,e,t){var i,r=a.getUTCHours();switch(i=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(a,e,t){var i,r=a.getUTCHours();switch(i=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(a,e,t){if("ho"===e){var r=a.getUTCHours()%12;return 0===r&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return O_h(a,e)},H:function(a,e,t){return"Ho"===e?t.ordinalNumber(a.getUTCHours(),{unit:"hour"}):O_H(a,e)},K:function(a,e,t){var r=a.getUTCHours()%12;return"Ko"===e?t.ordinalNumber(r,{unit:"hour"}):c(r,e.length)},k:function(a,e,t){var r=a.getUTCHours();return 0===r&&(r=24),"ko"===e?t.ordinalNumber(r,{unit:"hour"}):c(r,e.length)},m:function(a,e,t){return"mo"===e?t.ordinalNumber(a.getUTCMinutes(),{unit:"minute"}):O_m(a,e)},s:function(a,e,t){return"so"===e?t.ordinalNumber(a.getUTCSeconds(),{unit:"second"}):O_s(a,e)},S:function(a,e){return O_S(a,e)},X:function(a,e,t,r){var s=(r._originalDate||a).getTimezoneOffset();if(0===s)return"Z";switch(e){case"X":return de(s);case"XXXX":case"XX":return U(s);default:return U(s,":")}},x:function(a,e,t,r){var s=(r._originalDate||a).getTimezoneOffset();switch(e){case"x":return de(s);case"xxxx":case"xx":return U(s);default:return U(s,":")}},O:function(a,e,t,r){var s=(r._originalDate||a).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ce(s,":");default:return"GMT"+U(s,":")}},z:function(a,e,t,r){var s=(r._originalDate||a).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ce(s,":");default:return"GMT"+U(s,":")}},t:function(a,e,t,r){return c(Math.floor((r._originalDate||a).getTime()/1e3),e.length)},T:function(a,e,t,r){return c((r._originalDate||a).getTime(),e.length)}};var me=function(a,e){switch(a){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},he=function(a,e){switch(a){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const Nt={p:he,P:function(a,e){var s,t=a.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return me(a,e);switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;default:s=e.dateTime({width:"full"})}return s.replace("{{date}}",me(r,e)).replace("{{time}}",he(i,e))}};var xt=["D","DD"],Rt=["YY","YYYY"];function fe(n,a,e){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(a,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(a,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(a,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(a,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Yt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};var Qt={date:N({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:N({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:N({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ht={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const wa={code:"en-US",formatDistance:function(a,e,t){var r,i=Yt[a];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r},formatLong:Qt,formatRelative:function(a,e,t,r){return Ht[a]},localize:{ordinalNumber:function(a,e){var t=Number(a),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:y({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:y({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:y({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:y({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:y({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ie({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}}),era:T({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:T({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:T({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:T({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:T({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ca=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ma=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ya=/^'([^]*?)'?$/,Ta=/''/g,_a=/[a-zA-Z]/;function Ea(n,a,e){var t,r,i,s,u,m,d,f,h,b,p,M,x,A,R,V,z,K;v(2,arguments);var ka=String(a),W=J(),k=null!==(t=null!==(r=e?.locale)&&void 0!==r?r:W.locale)&&void 0!==t?t:wa,ee=E(null!==(i=null!==(s=null!==(u=null!==(m=e?.firstWeekContainsDate)&&void 0!==m?m:null==e||null===(d=e.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==u?u:W.firstWeekContainsDate)&&void 0!==s?s:null===(h=W.locale)||void 0===h||null===(b=h.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==i?i:1);if(!(ee>=1&&ee<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var te=E(null!==(p=null!==(M=null!==(x=null!==(A=e?.weekStartsOn)&&void 0!==A?A:null==e||null===(R=e.locale)||void 0===R||null===(V=R.options)||void 0===V?void 0:V.weekStartsOn)&&void 0!==x?x:W.weekStartsOn)&&void 0!==M?M:null===(z=W.locale)||void 0===z||null===(K=z.options)||void 0===K?void 0:K.weekStartsOn)&&void 0!==p?p:0);if(!(te>=0&&te<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var j=C(n);if(!function pt(n){if(v(1,arguments),!function vt(n){return v(1,arguments),n instanceof Date||"object"===F(n)&&"[object Date]"===Object.prototype.toString.call(n)}(n)&&"number"!=typeof n)return!1;var a=C(n);return!isNaN(Number(a))}(j))throw new RangeError("Invalid time value");var Ya=function Lt(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}(j),Za=function wt(n,a){return v(2,arguments),function bt(n,a){v(2,arguments);var e=C(n).getTime(),t=E(a);return new Date(e+t)}(n,-E(a))}(j,Ya),Fa={firstWeekContainsDate:ee,weekStartsOn:te,locale:k,_originalDate:j},qa=ka.match(Ma).map(function(w){var S=w[0];return"p"===S||"P"===S?(0,Nt[S])(w,k.formatLong):w}).join("").match(Ca).map(function(w){if("''"===w)return"'";var S=w[0];if("'"===S)return function Oa(n){var a=n.match(ya);return a?a[1].replace(Ta,"'"):n}(w);var H=Ut[S];if(H)return!(null!=e&&e.useAdditionalWeekYearTokens)&&function kt(n){return-1!==Rt.indexOf(n)}(w)&&fe(w,a,String(n)),!(null!=e&&e.useAdditionalDayOfYearTokens)&&function Wt(n){return-1!==xt.indexOf(n)}(w)&&fe(w,a,String(n)),H(Za,w,k.localize,Fa);if(S.match(_a))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return w}).join("");return qa}var Q=l(5313),ge=l(7606),D=l(5195),ve=l(8525),pe=l(3680),be=l(2823),we=l(3577),Ce=l(7935),Me=l(494),ye=l(6724);function Da(n,a){if(1&n&&(o.TgZ(0,"mat-option",12),o._uU(1),o.qZA()),2&n){const e=a.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}function Sa(n,a){if(1&n&&(o.TgZ(0,"mat-option",13),o._uU(1),o.qZA()),2&n){const e=a.$implicit,t=o.oxw();o.Q6J("value",e)("disabled",t.esMesPosterior(e)),o.xp6(1),o.Oqu(e)}}let Pa=(()=>{class n{constructor(e,t,r){this._lecturaService=e,this.fechaHoraService=t,this.dialog=r,this.records=[],this.mesesDelAnio=[],this.selectedMesResta="",this.selectedMes="",this.defaultMes="",this.selectedTipo="CONSUMO",this.options=["CONSUMO","RIEGO"],this.showSpinner=!1,this.showSpinnerA=!1,this.metaDataColumns=[{field:"CED_USU",title:"CEDULA"},{field:"NOM_USU",title:"NOMBRE"},{field:"APE_USU",title:"APELLIDO"},{field:"acciones",title:"ACCIONES"}],this.totalRecords=0}ngOnInit(){this.getFechaHoraActual()}cargarDatos(){this.showSpinner=!0;const e=this.selectedTipo;e&&this._lecturaService.getPersonaMedidor(e).subscribe(t=>{this.records=this.formatData(t),this.dataSource=new Q.by(this.records),this.totalRecords=this.records.length,this.changePage(0),this.showSpinner=!1})}ejecutarAccion(e,t){"input"===e.icon&&this.dialog.open(Pe,{data:{rowData:t,selectedTipo:this.selectedTipo,selectedMes:this.selectedMes,selectedMesResta:this.selectedMesResta,defaultMes:this.defaultMes}}).afterClosed().subscribe(i=>{i&&console.log("Datos editados:")})}applyFilter(e){const t=e.target.value.trim().toLowerCase();this.dataSource.filter=t,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changePage(e){const t=oe.N.PAGE_SIZE,r=t*e;this.dataSource.data=this.records.slice(r,r+t)}getFechaHoraActual(){this.showSpinnerA=!0,this.fechaHoraService.obtenerFechaHoraActual().subscribe(e=>{this.fechaActual=new Date(e.datetime),this.generarMesesDelAnio(),this.selectedMes=this.getMesActual(),this.defaultMes=this.getMesActual(),this.restarUnMes(this.selectedMes),this.cargarDatos(),this.showSpinnerA=!1},e=>{console.error("Error al obtener la fecha actual:",e)})}esMesPosterior(e){const t=this.fechaActual.getFullYear(),r=this.fechaActual.getMonth()+1,[i,s]=e.split("-"),u=Te(s);return+i>t||+i===t&&u>r}generarMesesDelAnio(){const e=this.fechaActual.getFullYear();this.mesesDelAnio=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].map(r=>`${e}-${r}`)}getMesActual(){return`${this.fechaActual.getFullYear()}-${["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"][this.fechaActual.getMonth()]}`}restarUnMes(e){if(e){const[t,r]=e.split("-"),s=function gt(n,a){return v(2,arguments),function ft(n,a){v(2,arguments);var e=C(n),t=E(a);if(isNaN(t))return new Date(NaN);if(!t)return e;var r=e.getDate(),i=new Date(e.getTime());return i.setMonth(e.getMonth()+t+1,0),r>=i.getDate()?i:(e.setFullYear(i.getFullYear(),i.getMonth(),r),e)}(n,-E(a))}(new Date(parseInt(t),Te(r)-1,1),1);this.selectedMesResta=Ea(s,"yyyy-MMMM",{locale:ht}).toUpperCase()}}formatData(e){return e.map(t=>({CED_USU:t.CED_USU,NOM_USU:t.NOM_USU,APE_USU:t.APE_USU,ID_MED:t.ID_MED,acciones:[{icon:"input",tooltip:"Ingresar Lectura",color:"primary"}]}))}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36($.I),o.Y36(ge.z),o.Y36(P.uw))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-page-ingresolecturas"]],decls:26,vars:9,consts:[[3,"showSpinner"],["fxLayout","","fxLayoutGap","20px"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["matInput","","placeholder","Ingrese datos a buscar","autocomplete","off",3,"keyup"],["input",""],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[3,"value"],[3,"value","disabled"]],template:function(t,r){1&t&&(o._UZ(0,"gst-spiner",0),o.TgZ(1,"gst-container")(2,"mat-card")(3,"mat-card-header"),o._UZ(4,"mat-card-title"),o.qZA(),o.TgZ(5,"mat-card-content")(6,"div",1)(7,"mat-form-field",2)(8,"mat-label"),o._uU(9,"Selecciona una opci\xf3n"),o.qZA(),o.TgZ(10,"mat-select",3),o.NdJ("ngModelChange",function(s){return r.selectedTipo=s})("selectionChange",function(){return r.cargarDatos()}),o.YNc(11,Da,2,2,"mat-option",4),o.qZA()(),o.TgZ(12,"mat-form-field",2)(13,"mat-label"),o._uU(14,"Selecciona un mes"),o.qZA(),o.TgZ(15,"mat-select",5),o.NdJ("ngModelChange",function(s){return r.selectedMes=s})("ngModelChange",function(s){return r.restarUnMes(s)}),o.YNc(16,Sa,2,3,"mat-option",6),o.qZA(),o._UZ(17,"gst-spiner",0),o.qZA(),o.TgZ(18,"mat-form-field",2)(19,"mat-label"),o._uU(20,"Buscar"),o.qZA(),o.TgZ(21,"input",7,8),o.NdJ("keyup",function(s){return r.applyFilter(s)}),o.qZA()()()()(),o.TgZ(23,"ng-scrollbar",9)(24,"gst-table",10),o.NdJ("actionClicked",function(s){return r.ejecutarAccion(s.accion,s.rowData)}),o.qZA()(),o.TgZ(25,"gst-paginator",11),o.NdJ("onChangePage",function(s){return r.changePage(s)}),o.qZA()()),2&t&&(o.Q6J("showSpinner",r.showSpinner),o.xp6(10),o.Q6J("ngModel",r.selectedTipo),o.xp6(1),o.Q6J("ngForOf",r.options),o.xp6(4),o.Q6J("ngModel",r.selectedMes),o.xp6(1),o.Q6J("ngForOf",r.mesesDelAnio),o.xp6(1),o.Q6J("showSpinner",r.showSpinnerA),o.xp6(7),o.Q6J("data",r.dataSource)("metaDataColumns",r.metaDataColumns),o.xp6(1),o.Q6J("length",r.totalRecords))},dependencies:[Y.sg,_.xw,_.SQ,X.Nt,I.KE,I.hX,g.JJ,g.On,D.a8,D.dn,D.dk,D.n5,ve.gD,pe.ey,be.KC,we.e,Ce.a,Me.J,ye.O],styles:["mat-card[_ngcontent-%COMP%]{border:2px solid #000000;border-radius:12px}"]})}return n})();function Te(n){return["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].indexOf(n)+1}var Ua=l(7624);function Aa(n,a){if(1&n&&(o.TgZ(0,"mat-option",10),o._uU(1),o.qZA()),2&n){const e=a.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}function Ia(n,a){if(1&n&&(o.TgZ(0,"mat-option",10),o._uU(1),o.qZA()),2&n){const e=a.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e)}}const Na=[{path:"",component:_e,children:[{path:"",redirectTo:"ingresar",pathMatch:"full"},{path:"ingresar",component:Pa},{path:"editar",component:(()=>{class n{constructor(e,t,r){this._servLecturas=e,this.fechaHoraService=t,this.dialog=r,this.records=[],this.mesesDelAnio=[],this.selectedMesResta="",this.selectedMes="",this.selectedTipo="CONSUMO",this.options=["CONSUMO","RIEGO"],this.showSpinner=!1,this.showSpinnerA=!1,this.metaDataColumns=[{field:"CED_USU",title:"CEDULA"},{field:"NOM_USU",title:"NOMBRE"},{field:"APE_USU",title:"APELLIDO"},{field:"LEC_ANT",title:"LEC. ANTERIOR"},{field:"LEC_ACT",title:"LEC. ACTUAL"},{field:"MES_CON",title:"MES"},{field:"acciones",title:"ACCIONES"}],this.data=[],this.totalRecords=this.records.length,this.dataSource=new Q.by(this.records),this.cargarDatos(),this.changePage(0)}ngOnInit(){this.showSpinnerA=!0,this.fechaHoraService.obtenerFechaHoraActual().subscribe(e=>{this.fechaActual=new Date(e.datetime),this.generarMesesDelAnio(),this.selectedMes=this.getMesActual(),this.cargarDatos(),this.showSpinnerA=!1},e=>{console.error("Error al obtener la fecha actual:",e)})}generarMesesDelAnio(){const e=this.fechaActual.getFullYear();this.mesesDelAnio=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"].map(r=>`${e}-${r}`)}getMesActual(){return`${this.fechaActual.getFullYear()}-${["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"][this.fechaActual.getMonth()]}`}cargarDatos(){this.showSpinner=!0;const e=this.selectedTipo;e&&this._servLecturas.getLecturas(e,this.selectedMes).subscribe(r=>{this.records=r.map(i=>({CED_USU:i.CED_USU,NOM_USU:i.NOM_USU,APE_USU:i.APE_USU,LEC_ANT:i.LEC_ANT,LEC_ACT:i.LEC_ACT,MES_CON:i.MES_CON,ID_LEC:i.ID_LEC,TIPO_MED:i.TIPO_MED,acciones:[{icon:"edit",tooltip:"Editar Lectura",color:"primary"}]})),this.dataSource=new Q.by(this.records),this.totalRecords=this.records.length,this.changePage(0),this.showSpinner=!1})}ejecutarAccion(e,t){"edit"===e.icon&&this.dialog.open(Ua.L,{data:{rowData:t,selectedTipo:this.selectedTipo}}).afterClosed().subscribe(i=>{this.cargarDatos()})}applyFilter(e){const t=e.target.value.trim().toLowerCase();this.dataSource.filter=t,this.dataTable.paginator&&this.dataTable.paginator.firstPage()}changePage(e){const t=oe.N.PAGE_SIZE,r=t*e;this.data=this.records.slice(r,r+t)}static#e=this.\u0275fac=function(t){return new(t||n)(o.Y36($.I),o.Y36(ge.z),o.Y36(P.uw))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["gst-pageeditarlecturas"]],viewQuery:function(t,r){if(1&t&&o.Gf(Q.by,5),2&t){let i;o.iGM(i=o.CRH())&&(r.dataTable=i.first)}},decls:27,vars:9,consts:[[3,"showSpinner"],["fxLayout","","fxLayoutGap","20px"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Ingrese datos a buscar","autocomplete","off",3,"keyup"],["input",""],[1,"heightMaxScrollbar"],[3,"data","metaDataColumns","actionClicked"],[3,"length","onChangePage"],[3,"value"]],template:function(t,r){1&t&&(o._UZ(0,"gst-spiner",0),o.TgZ(1,"gst-container")(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),o._uU(5,"opciones"),o.qZA()(),o.TgZ(6,"mat-card-content")(7,"div",1)(8,"mat-form-field",2)(9,"mat-label"),o._uU(10,"Selecciona un mes"),o.qZA(),o.TgZ(11,"mat-select",3),o.NdJ("ngModelChange",function(s){return r.selectedMes=s})("selectionChange",function(){return r.cargarDatos()}),o.YNc(12,Aa,2,2,"mat-option",4),o.qZA(),o._UZ(13,"gst-spiner",0),o.qZA(),o.TgZ(14,"mat-form-field",2)(15,"mat-label"),o._uU(16,"Selecciona una opci\xf3n"),o.qZA(),o.TgZ(17,"mat-select",3),o.NdJ("ngModelChange",function(s){return r.selectedTipo=s})("selectionChange",function(){return r.cargarDatos()}),o.YNc(18,Ia,2,2,"mat-option",4),o.qZA()(),o.TgZ(19,"mat-form-field",2)(20,"mat-label"),o._uU(21,"Buscar"),o.qZA(),o.TgZ(22,"input",5,6),o.NdJ("keyup",function(s){return r.applyFilter(s)}),o.qZA()()()()(),o.TgZ(24,"ng-scrollbar",7)(25,"gst-table",8),o.NdJ("actionClicked",function(s){return r.ejecutarAccion(s.accion,s.rowData)}),o.qZA()(),o.TgZ(26,"gst-paginator",9),o.NdJ("onChangePage",function(s){return r.changePage(s)}),o.qZA()()),2&t&&(o.Q6J("showSpinner",r.showSpinner),o.xp6(11),o.Q6J("ngModel",r.selectedMes),o.xp6(1),o.Q6J("ngForOf",r.mesesDelAnio),o.xp6(1),o.Q6J("showSpinner",r.showSpinnerA),o.xp6(4),o.Q6J("ngModel",r.selectedTipo),o.xp6(1),o.Q6J("ngForOf",r.options),o.xp6(7),o.Q6J("data",r.dataSource)("metaDataColumns",r.metaDataColumns),o.xp6(1),o.Q6J("length",r.totalRecords))},dependencies:[Y.sg,_.xw,_.SQ,X.Nt,I.KE,I.hX,g.JJ,g.On,D.a8,D.dn,D.dk,D.n5,ve.gD,pe.ey,be.KC,we.e,Ce.a,Me.J,ye.O],styles:["mat-card[_ngcontent-%COMP%]{border:2px solid #000000;border-radius:12px}"]})}return n})()}]}];let La=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=o.oAB({type:n});static#a=this.\u0275inj=o.cJS({imports:[Z.Bz.forChild(Na),Z.Bz]})}return n})();var xa=l(3223),Ra=l(843);let Wa=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=o.oAB({type:n});static#a=this.\u0275inj=o.cJS({imports:[Y.ez,La,Ra.m,xa.Y]})}return n})()}}]);